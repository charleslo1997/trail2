function radians(a){return a*DEG2RAD}function degrees(a){return a*RAD2DEG}function distance(a,b){return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))}function norm(a,b,c){return(a-b)/(c-b)}function lerp(a,b,c){return(c-b)*a+b}function map(a,b,c,d,e){return lerp(norm(a,b,c),d,e)}function clamp(a,b,c){return b>a?a=b:a>c&&(a=c),a}function randomPointOnSphere(a){var b=Math.random(),c=Math.random(),d=2*Math.PI*b,e=Math.acos(2*c-1),f=a*Math.sin(e)*Math.cos(d),g=a*Math.sin(e)*Math.sin(d),h=a*Math.cos(e);return[f,g,h]}function pointOnSphere(a,b,c){var d=2*Math.PI*b,e=Math.acos(2*c-1),f=a*Math.sin(e)*Math.cos(d),g=a*Math.sin(e)*Math.sin(d),h=a*Math.cos(e);return[f,g,h]}function html5StorageSupported(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function getLoadingMessage(a){var b=["Stuff","Things","Items"],c=["Some Stuff","Some Things","Some Items","A Few Things","A Few Items"];if(Math.random()<.33){var d=Math.floor(Math.random()*b.length);return"Loading "+a+" "+b[d]}if(Math.random()<.5){var d=Math.floor(Math.random()*b.length);return"Loading "+b[d]+" For "+a}var d=Math.floor(Math.random()*c.length);return"Loading "+c[d]+" For "+a}function shuffleArray(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}function removeTweenGarbage(a){a.style.transition&&(a.style.transition=null),a.style["-webkit-transform"]&&(a.style["-webkit-transform"]=null),a.style["-moz-transform"]&&(a.style["-moz-transform"]=null),a.style["-ms-transform"]&&(a.style["-ms-transform"]=null),a.style["-o-transform"]&&(a.style["-o-transform"]=null)}!function(a){function b(a){this.files=a.files,this.parentContainer=a.parent,this.topOffset=a.topOffset||0,this.barColor=a.barColor||"#fff",this.bgColor=a.bgColor||null,this.textColor=a.textColor||null,this.message=a.message||null,this.init()}b.prototype.init=function(){$("#logo");if(this.width=a.innerWidth,this.currentWidth=0,this.targWidth=0,this.currentX=0,this.targX=0,this.currentY=0,this.targY=0,this.numFiles=this.files.length,this.glitch=!1,this.playSounds=!1,a.appData&&a.audioController&&this.playSounds){var b=a.appData.common.sounds;b.loadStart&&audioController.audioOn&&(this.loadStartSound=audioController.createSound(b.loadStart,!1,!1,1)),b.loadComplete&&audioController.audioOn&&(this.loadCompleteSound=audioController.createSound(b.loadComplete,!1,!1,1))}if(this.container=document.createElement("div"),this.parentContainer.appendChild(this.container),$(this.container).addClass("preloader-container"),this.bgColor&&(this.bg=document.createElement("div"),this.container.appendChild(this.bg),$(this.bg).css({position:"absolute",width:"100%",height:"100%",backgroundColor:this.bgColor})),this.bar=document.createElement("div"),this.container.appendChild(this.bar),$(this.bar).addClass("preloader"),this.bar.style.backgroundColor=this.barColor,this.container.style.top=a.innerHeight-30+this.topOffset+"px",this.container.style.left="0",this.bar.style.width=this.currentWidth+"px",this.message){this.text=document.createElement("div"),this.text.style.position="absolute",this.text.style.left="30px";var c=$(this.container),d=c.height(),e=c.offset().top;this.text.style.top=e+(d-16)/2+"px",this.text.style.zIndex=99,this.parentContainer.appendChild(this.text);var f=a.appData&&a.audioController?appData.common.sounds.typer:null;this.typer=new Typer({element:this.text,delay:10,color:this.textColor,soundUrls:f}),this.typer.type(this.message)}},b.prototype.load=function(a){function b(){var a=.2*fpsScalar,d=c.numLoaded/c.numFiles;return c.targWidth=c.width*d,c.currentWidth+=(c.targWidth-c.currentWidth)*a,c.bar.style.width=c.currentWidth+"px",c.currentX+=(c.targX-c.currentX)*a,c.bar.style.left=c.currentX+"px",c.currentY+=(c.targY-c.currentY)*a,c.bar.style.top=c.currentY+"px",c.bg&&(c.bg.style.top=c.currentY+"px"),Math.abs(c.width-c.currentWidth)<.1&&(c.loadCompleteSound&&audioController.audioOn&&32!=c.targY&&c.loadCompleteSound.play(),c.targY=32,c.text&&(c.parentContainer.removeChild(c.text),c.text=null)),0!=c.targY&&Math.abs(c.targY-c.currentY)<.1?(c.bar.style.top=c.targY+"px",cancelAnimationFrame(c.intervalID),c.intervalID=null,void(c.callback&&c.callback(c.loadStore))):(c.glitch&&(c.bar.style.opacity=.5+.5*Math.random()),void(c.intervalID=requestAnimationFrame(b)))}var c=this;this.callback=a,this.loadStore={},this.numLoaded=0,b();for(var d=0;d<this.files.length;d++){var e=this.files[d];"string"==typeof e?e.contains(".json")?this.loadJSON(e):e.contains(".js")?this.loadJS(e):(e.contains(".jpg")||e.contains(".png")||e.contains(".gif"))&&this.loadImage(e):e.geometry&&this.loadGeometry(e.url)}this.loadStartSound&&audioController.audioOn&&this.loadStartSound.play()},b.prototype.loadJSON=function(a){var b=this;$.getJSON(a,function(c){b.loadStore[a]=c,b.numLoaded++})},b.prototype.loadJS=function(a){var b=this;$.getScript(a,function(c){b.loadStore[a]=c,b.numLoaded++})},b.prototype.loadImage=function(a){var b=this,c=new Image;c.onload=function(){b.numLoaded++,b.loadStore[a]=c},c.src=a},b.prototype.loadGeometry=function(a){var b=this,c=new THREE.JSONLoader;c.load(a,function(c){b.loadStore[a]=c,b.numLoaded++})},b.prototype.resize=function(b){if(this.width=a.innerWidth,this.topOffset=b,this.container.style.top=a.innerHeight-30+this.topOffset+"px",this.text){var c=$(this.container),d=c.height(),e=c.offset().top;this.text.style.top=e+(d-16)/2+"px"}},b.prototype.clear=function(){this.intervalID&&cancelAnimationFrame(this.intervalID),this.cleanUp()},b.prototype.cleanUp=function(){this.typer&&(this.typer.clear(),this.typer=null),this.text&&($(this.text).remove(),this.text=null),this.container&&this.bar&&this.container.removeChild(this.bar),this.parentContainer&&this.container&&this.parentContainer.removeChild(this.container),this.loadStartSound&&(audioController.destroySound(this.loadStartSound),this.loadStartSound=null),this.loadCompleteSound&&(audioController.destroySound(this.loadCompleteSound),this.loadCompleteSound=null),this.width=null,this.currentWidth=null,this.targWidth=null,this.numFiles=null,this.parentContainer=null,this.container=null,this.text=null,this.bar=null,this.intervalID=null,this.message=null},a.Preloader=b}(window),function(a){jQuery.browser=jQuery.browser||{},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())||/trident/.test(navigator.userAgent.toLowerCase()),jQuery.browser.mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera);var RAD2DEG=180/Math.PI,DEG2RAD=Math.PI/180;!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.Event.prototype,window.CustomEvent=a}(),Array.prototype.contains=function(a){return-1!=this.indexOf(a)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.capitalizeWords=function(){for(var a="",b=this.split(" "),c=b.length,d=0;c>d;d++){var e=c-1>d?" ":"";a+=b[d].capitalize()+e}return a},String.prototype.escapeRegExp=function(){return this.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)},"contains"in String.prototype||(String.prototype.contains=function(a,b){return-1!==String.prototype.indexOf.call(this,a,b)}),function(a){function b(a){this.element=a.element,this.delay=a.delay||20,this.typeDelay=a.typeDelay,this.untypeDelay=a.untypeDelay,this.soundUrls=a.soundUrls,this.increment=a.increment||1,this.updateCallback=a.updateCallback,this.color=a.color,this.randomize=a.randomize}b.prototype.type=function(a,b){if(this.element){this.soundUrls&&audioController.audioOn&&(this.sound=audioController.createSound(this.soundUrls,!1,!1,.5)),this.clear();var c=this,d=a.split(""),e=0,f=this.typeDelay?this.typeDelay:this.delay;f/=fpsScalar;var g=$(this.element).css("fontSize").replace("px",""),h=16==g?"<span class='cursor-lrg'>|</span>":"<span class='cursor-sml'>|</span>";this.color&&($(this.element).css("color",this.color),h=h.replace("'>","' style='color:"+this.color+";'>"));var i="";this.element.innerHTML="",this.interval=setInterval(function(){c.sound&&c.sound.play();for(var a=c.randomize?Math.ceil(10*Math.random()):c.increment,f=0;a>f;f++){var g="~"==d[e]?"<br/><br/>":d[e];if(i+=g,c.element.innerHTML=i+h,e++,e==d.length){c.element.innerHTML=i,c.clear(),b&&b();break}}c.updateCallback&&c.onUpdate()},f)}},b.prototype.typeWords=function(a,b){if(this.element){this.soundUrls&&audioController.audioOn&&(this.sound=audioController.createSound(this.soundUrls,!1,!1,.2)),this.clear();var c=this,d=a.split(" "),e=0,f=this.typeDelay?this.typeDelay:this.delay;f/=fpsScalar;var g=$(this.element).css("fontSize").replace("px",""),h=16==g?"<span class='cursor-lrg'>|</span>":"<span class='cursor-sml'>|</span>",i="";this.element.innerHTML="",this.interval=setInterval(function(){var a="~"==d[e]?"<br/><br/>":d[e];i+=a+" ",c.element.innerHTML=i+h,e++,c.sound&&c.sound.play(),e==d.length&&(c.element.innerHTML=i,c.clear(),b&&b())},f)}},b.prototype.typeGlitch=function(a,b,c,d){for(var e=this,f=0,g=a.split(" "),h=0;h<g.length;h++)g[h]=g[h]+" ";this.interval=setInterval(function(){e.element.innerHTML=shuffleArray(g),f++,e.sound&&e.sound.play(),f==b&&(e.element.innerHTML=a,e.clear(),d&&d())},c/fpsScalar)},b.prototype.untype=function(a){if(this.element){this.clear();var b=this,c=this.element.innerHTML,d=c.length-1,e=this.untypeDelay?this.untypeDelay:this.delay;e/=fpsScalar,-1==d?a&&a():this.interval=setInterval(function(){b.element.innerHTML=c.substr(0,d),d--,-1==d&&(b.clear(),a&&a())},e)}},b.prototype.untypeInstantly=function(){this.clear(),this.element.innerHTML=""},b.prototype.clear=function(){this.interval&&(clearInterval(this.interval),this.interval=null);var a=this.element.innerHTML;-1!=a.indexOf("<span")&&(this.element.innerHTML=a.substr(0,a.indexOf("<span")))},b.prototype.onUpdate=function(){this.updateCallback&&this.updateCallback()},a.Typer=b}(window),function(a){function b(a){this.element=a.element,this.typer=new Typer({element:this.element[0],typeDelay:a.typeDelay,untypeDelay:a.untypeDelay,soundUrls:a.typerSoundUrls,updateCallback:this.onTypeUpdate}),this.currentMessage=null,this.rawElement=this.element[0],this.offset={x:0,y:0},this.mouseX=0,a.followMouse&&inputController.register(this)}b.prototype.handleMouseMove=function(a){this.mouseX=a.clientX,this.rawElement.style.left="left"==this.alignment?20+this.mouseX+this.offset.x+"px":this.mouseX-10-this.element.width()+this.offset.x+"px",this.rawElement.style.top=a.clientY+this.offset.y+"px"},b.prototype.setMessage=function(a,b,c,d){if(a!=this.currentMessage){b&&audioController.audioOn&&b.play(),this.alignment=c||"left",this.offset=d||{x:0,y:0};var e="left"==this.alignment?"/ "+a:a+" /";if(this.currentMessage){var f=this;this.typer.untype(function(){f.typer.type(e)})}else this.typer.type(e);this.currentMessage=a}},b.prototype.removeMessage=function(a){this.currentMessage&&(a?this.typer.untypeInstantly():this.typer.untype(),this.currentMessage=null)},b.prototype.onTypeUpdate=function(){var a=contentController.messenger;"right"==a.alignment&&(a.rawElement.style.left=a.mouseX-10-a.element.width()+a.offset.x+"px")},a.Messenger=b}(window),function(a){function b(a){this.data=a.data,this.bottomPadding=a.bottomPadding,this.minContentHeight=a.minContentHeight,this.maxContentHeight=a.maxContentHeight,this.callback=a.callback,this.loadContent()}b.prototype.loadContent=function(){for(var a=this,b=[],c=this.data.baseUrl,d=this.data.networks,e=d.length,f=0;e>f;f++)b.push(c+d[f].img);this.preloader=new Preloader({files:b,parent:document.body,topOffset:0,barColor:"#0c0c0c",message:getLoadingMessage("Connect")}),this.preloader.load(function(b){a.preloader.cleanUp(),a.preloader=null,isMobile?a.initMobile(b):a.init(b)})},b.prototype.init=function(a){for(var b=this,c=contentController,d=$("#content > .content-container > .stuff > #copy"),e=$("#content > .content-container"),f=$("#content > .content-container > .container"),g="",h=this.data.baseUrl,i=this.data.networks,j=i.length,k=0;j>k;k++)g+="<div class='network-icon animate-02'><a href='"+i[k].url+"' target='_blank'><img class='network' src='"+a[h+i[k].img].src+"' /></a></div>";d.html(this.data.desc.replaceAll("~","<br/><br/>")),f.html(g),$(".network-icon").mouseover(function(){move($(this).find("img")[0]).ease("ease-out-quint").scale(1.25).duration("0.2s").end(),$(this).css("backgroundColor","#6bd4ff")}).mouseout(function(){move($(this).find("img")[0]).ease("ease-out-quint").scale(1).duration("0.2s").end(),$(this).css("backgroundColor","#46b4e1")});var l=clamp(f.position().top+f.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight);contentController.currentContentSize=l,d.html(""),c.showCloseButton(),c.setContentSize(l,!0,function(){c.typeTitle(b.data.title),c.typeCopy(b.data.desc,!1,function(){if(b.data.replace)for(var a=0;a<b.data.replace.length;a++)d[0].innerHTML=d[0].innerHTML.replace(b.data.replace[a].string,b.data.replace[a].newString);b.scrollableContent=new ScrollableContent({scrollElement:e,scrollHeight:l-30,easing:.3}),c.register(b.scrollableContent),contentController.initLinkSounds()}),b.callback&&b.callback()})},b.prototype.initMobile=function(a){for(var b=this.data.desc.replaceAll("~","<br/><br/>")+"<br/><br/>",c=this.data.baseUrl,d=this.data.networks,e=d.length,f=0;e>f;f++)b+="<div class='network-icon animate-02'><a href='"+d[f].url+"' target='_blank'><img class='network' src='"+a[c+d[f].img].src+"' /></a></div>";if(this.data.replace)for(var f=0;f<this.data.replace.length;f++)b=b.replace(this.data.replace[f].string,this.data.replace[f].newString);var g=$("#content .mobile-content");g.html("<p id='title'>"+this.data.title+"</p><p>"+b+"</p>"),$(".network-icon").css("marginBottom","10px");var h=$(".network-icon").last();$("#content").css("height",h.position().top+h.height()+30+"px"),contentController.scrollToContent(),this.callback&&this.callback()},b.prototype.resize=function(){if(this.preloader)return this.preloader.resize(0),void $("#content").css({top:$("#canvas").height()+"px"});var a=$("#content > .content-container > .container"),b=clamp(a.position().top+a.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight);contentController.currentContentSize=b,contentController.contentOpen&&contentController.setContentSize(b),this.scrollableContent&&(this.scrollableContent.scrollHeight=b-30,this.scrollableContent.targY=0)},b.prototype.cleanUp=function(){this.scrollableContent&&(contentController.unregister(this.scrollableContent),this.scrollableContent.cleanUp(),this.scrollableContent=null),this.data=null,this.bottomPadding=null,this.minContentHeight=null,this.maxContentHeight=null},a.ConnectContent=b}(window),function(a){function b(b){this.data=b.data,this.items=this.data.items,this.baseUrl=b.baseUrl,this.sectionType=b.sectionId,this.container=b.container,this.copyContainer=b.copyContainer,this.easing=b.easing||.3,this.mouseBuffer=b.mouseBuffer||.15*a.innerWidth,this.customMouseBuffer=void 0!=b.mouseBuffer,this.targX=0,this.currentX=0,this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),this.enabled=!0,this.loadStore=b.loadStore,isMobile?this.initMobile(b.loadCallback):this.init(b.loadCallback)}b.prototype.init=function(){var b="",c=this.data.photos.length,d=this,e="work"==this.sectionType?"work-content":"play-content";this.copyContainer.find("#full-title").html(this.data.title);var f=this.data.desc;if(this.data.type&&(f+=" / Type: "+this.data.type),this.data.role&&(f+=" / Role: "+this.data.role),this.data.year&&(f+=" / Year: "+this.data.year),this.data.agency&&(f+=" / Agency or Studio: <a class='"+e+" animate-015' href='"+this.data.agencyUrl+"' target='_blank'>"+this.data.agency+"</a>"),this.data.awards.length>0){f+=" / Awards: ";for(var g=this.data.awards.length,h=0;g>h;h++)f+=0==h?"<a class='"+e+" animate-015' href='"+this.data.awards[h].url+"' target='blank'>"+this.data.awards[h].title+"</a>":", <a class='"+e+" animate-015' href='"+this.data.awards[h].url+"' target='blank'>"+this.data.awards[h].title+"</a>"}this.data.url&&(f+="<br/><br/><a class='"+e+" animate-015 visit' href='"+this.data.url+"' target='_blank'>Visit</a>"),this.data.sourceUrl&&(f+="&nbsp;/&nbsp;<a class='"+e+" animate-015 visit' href='"+this.data.sourceUrl+"' target='_blank'>Source Code</a>"),this.copyContainer.find("#full-copy").html(f);for(var h=0;c>h;h++)b+="<div class='photo-container'><img src='"+this.loadStore[this.baseUrl+this.data.photos[h]].src+"' class='photo' /></div>";this.container.html(b),isMobile||(this.scrollbar=new Scrollbar({container:this.container.parent(),color:new THREE.Color(world.getColorForSection(contentController.currentSectionName)).getHexString(),callback:function(a){var b=-(d.galleryWidth-d.windowWidth+55);d.targX=clamp(b*a,b,0)}}),this.container.parent().append(this.scrollbar.view));var i=a.innerHeight-190-this.copyContainer.height();$(".photo").css({height:i+"px",width:"auto"}),$(".visit").click(function(){contentController.pauseSite()}),$(".photo-container").css("cursor","ew-resize"),inputController.register(this),this.container.on("mousewheel",function(a){d.handleMouseWheel(a)}),this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),this.galleryWidth<this.windowWidth&&this.scrollbar&&this.scrollbar.hide(),setTimeout(function(){d.resize()},500)},b.prototype.initMobile=function(b){var c="<div class='close-mobile'><img src='assets/img/ui/close.png'/></div><br/><br/><p class='title'>"+this.data.title+"</p>",d=this.data.photos.length,e=this,f="work"==this.sectionType?"work-content":"play-content";this.content=$(document.createElement("div")),this.content.addClass("mobile-full-gallery"),document.body.append(this.content[0]);var g=$(document.createElement("div"));g.addClass("mobile-full-gallery-container"),this.content.append(g);var h="<p>"+this.data.desc+"</p>";if(h+="<p class='padded'>",this.data.type&&(h+=" / Type: "+this.data.type+"<br/>"),this.data.role&&(h+=" / Role: "+this.data.role+"<br/>"),this.data.year&&(h+=" / Year: "+this.data.year+"<br/>"),this.data.agency&&(h+=" / Agency: <a class='"+f+" animate-015' href='"+this.data.agencyUrl+"' target='_blank'>"+this.data.agency+"</a><br/>"),this.data.awards.length>0){h+=" / Awards: ";for(var i=this.data.awards.length,j=0;i>j;j++)h+=0==j?"<a class='"+f+" animate-015' href='"+this.data.awards[j].url+"' target='blank'>"+this.data.awards[j].title+"</a>":", <a class='"+f+" animate-015' href='"+this.data.awards[j].url+"' target='blank'>"+this.data.awards[j].title+"</a>"}this.data.url&&(h+="<p class='padded'><a class='"+f+" animate-015 visit' href='"+this.data.url+"' target='_blank'>Visit</a></p>"),this.data.sourceUrl&&(h+="<p class='padded'><a class='"+f+" animate-015 visit' href='"+this.data.sourceUrl+"' target='_blank'>Source Code</a></p>"),h+="</p>",c+=h;for(var k=void 0!=this.data.mobile?this.data.mobile:this.data.photos,j=0;d>j;j++)c+="<div class='photo-container-mobile'><img src='"+this.loadStore[this.baseUrl+k[j]].src+"' class='photo-mobile' /></div>";this.originalScrollPos=a.scrollY,g.html(c),setTimeout(function(){$(".close-mobile").click(function(){contentController.collapseForMobile()}),move(".mobile-full-gallery-container").ease("ease-in-out-quint").set("transform","translateY(0px)").duration("0.9s").end(function(){$("#content").css("display","none"),e.content.css("position","absolute"),g.css("top",0),a.scrollTo(0,0)}),b&&b()},50)},b.prototype.closeMobile=function(){this.content.css("position","fixed"),$("#content").css("display","block"),a.scrollTo(0,this.originalScrollPos);var b=this;move(".mobile-full-gallery-container").ease("ease-in-out-quint").set("transform","translateY(100vh)").duration("0.9s").end(function(){b.content.html(""),b.content.remove(),b.content=null,b.originalScrollPos=null,b.cleanUp()})},b.prototype.handleMouseWheel=function(b){if(this.enabled){if(this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),b.clientY>=this.container.offset().top&&this.galleryWidth>this.windowWidth){var c=Math.abs(b.deltaY)>Math.abs(b.deltaX)?b.deltaY:-b.deltaX;c*=b.deltaFactor,this.targX+=c,this.targX=clamp(this.targX,-(this.galleryWidth-this.windowWidth+55),0)}else this.galleryWidth<this.windowWidth&&(this.targX=0);this.updateScrollbarPosition()}},b.prototype.handleMouseDown=function(b){this.enabled&&b.clientY>=this.container.offset().top&&b.clientY<$(this.scrollbar.view).offset().top&&this.galleryWidth>this.windowWidth&&(this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),this.lastTargX=this.targX,this.pickupX=b.clientX,this.dragging=!0)},b.prototype.handleMouseUp=function(){this.enabled&&(this.dragging=!1)},b.prototype.handleMouseMove=function(a){this.enabled&&this.dragging&&(this.targX=this.lastTargX+(a.clientX-this.pickupX),this.targX=clamp(this.targX,-(this.galleryWidth-this.windowWidth+55),0),this.updateScrollbarPosition())},b.prototype.render=function(){this.enabled&&(this.currentX+=(this.targX-this.currentX)*this.easing*fpsScalar,this.container.css("left",this.currentX+"px"),this.scrollbar&&this.scrollbar.render())},b.prototype.resize=function(){this.customMouseBuffer||(this.mouseBuffer=.15*a.innerWidth);var b=a.innerHeight-190-this.copyContainer.height();$(".photo").css({height:b+"px"}),this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),this.targX=clamp(this.targX,-(this.galleryWidth-this.windowWidth+55),0),this.scrollbar&&this.scrollbar.resize(),this.updateScrollbarPosition(),this.galleryWidth<this.windowWidth?(this.targX=0,this.scrollbar&&this.scrollbar.hide()):(this.targX=clamp(this.targX,-(this.galleryWidth-this.windowWidth+55),0),this.scrollbar&&this.scrollbar.show())},b.prototype.updateScrollbarPosition=function(){if(this.scrollbar){var a=-(this.galleryWidth-this.windowWidth+55);this.scrollbar.setValue(map(this.targX,a,0,1,0))}},b.prototype.cleanUp=function(){inputController.unregister(this),this.scrollbar&&this.scrollbar.cleanUp(),isMobile||(this.container.off("mousewheel"),this.container.html(""),this.container.css("left","0px")),this.data=null,this.items=null,this.baseUrl=null,this.container=null,this.easing=null,this.mouseBuffer=null,this.targX=null,this.currentX=null,this.windowWidth=null,this.galleryWidth=null,this.enabled=null,this.scrollbar=null},a.FullGallery=b}(window),function(a){function b(a){this.init(a)}b.prototype.init=function(a){var b=new THREE.MeshLambertMaterial({color:a.color,ambient:a.color});this.mesh=new THREE.Mesh(new THREE.PlaneGeometry(a.size,a.size,a.segments,a.segments),b),this.mesh.rotation.x=-Math.PI/2,this.mesh.position.set(0,-3,0),this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,this.vertices=this.mesh.geometry.vertices,a.container.add(this.mesh);for(var c=this.vertices.length,d=0;c>d;d++)this.vertices[d].zStart=this.vertices[d].z;this.glitching=!1,this.transitioning=!1},b.prototype.setColor=function(a){this.mesh.material.color.set(a),this.mesh.material.ambient.set(a)},b.prototype.glitch=function(){this.glitching=!0,this.transitioning=!0},b.prototype.reset=function(){this.glitching=!1},b.prototype.render=function(){this.renderChunk(this.vertices),this.mesh.geometry.verticesNeedUpdate=!0},b.prototype.renderChunk=function(a){var b=0,c=this,d=a.length,e=function(){for(var f=(new Date).getTime(),g=0;d>b&&(new Date).getTime()-f<50;b++){var h=a[b];if(c.glitching)h.z=h.zStart+(16*Math.random()-8),c.transitioning=!0;else{var i=h.zStart-h.z;Math.abs(i)>.05?(h.z+=.3*i*fpsScalar,c.transitioning=!0):(h.z=h.zStart,g++,g===d&&c.transitioning&&(c.transitioning=!1))}}b<a.length&&setTimeout(e,25)};setTimeout(e,25)},a.Ground=b}(window),function(a){function b(a){this.data=a.data,this.bottomPadding=a.bottomPadding,this.minContentHeight=a.minContentHeight,this.maxContentHeight=a.maxContentHeight,this.callback=a.callback,this.loadContent()}b.prototype.loadContent=function(){var a=this;this.preloader=new Preloader({files:[this.data.photo],parent:document.body,topOffset:0,barColor:"#0c0c0c",message:getLoadingMessage("Info")}),this.preloader.load(function(b){a.preloader.cleanUp(),a.preloader=null,isMobile?a.initMobile(b):a.init(b)})},b.prototype.init=function(b){var c=this,d=contentController,e=$("#content > .content-container > .stuff > #copy"),f=$("#content > .content-container"),g=$("#content > .content-container > .container");g.html("<img class='me' src='"+b[this.data.photo].src+"' />");var h=this.data.desc.replaceAll("~","<br/><br/>"),i=this.data.awards;h+="<br/><br/>Accolades<br/>";for(var j=i.length,k=0;j>k;k++)h+=j-1>k?i[k].title+"<br/>":i[k].title;var l=this.data.editorial;h+="<br/><br/>Editorial<br/>";for(var m=l.length,k=0;m>k;k++)h+=m-1>k?l[k].title+"<br/>":l[k].title;e.html(h),$(".me").css({height:.33*a.innerHeight+"px",maxHeight:"400px"});var n=clamp(g.position().top+g.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight);contentController.currentContentSize=n,e.html(""),d.showCloseButton(),d.setContentSize(n,!0,function(){d.typeTitle(c.data.title),d.typeCopy(h,!0,function(){if(c.data.replace)for(var a=0;a<c.data.replace.length;a++)e[0].innerHTML=e[0].innerHTML.replace(c.data.replace[a].string,c.data.replace[a].newString);for(var a=0;j>a;a++)e[0].innerHTML=e[0].innerHTML.replace(i[a].title,"<a class='info-content animate-015' href='"+i[a].url+"' target='_blank'>"+i[a].title+"</a>");for(var a=0;m>a;a++)e[0].innerHTML=e[0].innerHTML.replace(l[a].title,"<a class='info-content animate-015' href='"+l[a].url+"' target='_blank'>"+l[a].title+"</a>");c.scrollableContent=new ScrollableContent({scrollElement:f,scrollHeight:n-30,easing:.3}),d.register(c.scrollableContent),contentController.initLinkSounds()}),c.callback&&c.callback()})},b.prototype.initMobile=function(a){var b="<img class='me-mobile' src='"+a[this.data.photo].src+"' /><br/><br/>"+this.data.desc.replaceAll("~","<br/><br/>");if(b+="<br/><br/><br/>Accolades:<br/><br/>",this.data.replace)for(var c=0;c<this.data.replace.length;c++)b=b.replace(this.data.replace[c].string,this.data.replace[c].newString);for(var d=this.data.awards,e=d.length,c=0;e>c;c++){var f="<a class='info-content animate-015' href='"+d[c].url+"' target='_blank'>"+d[c].title+"</a>";b+=e-1>c?f+"<br /><br />":f+"<br/><br/>"}var g=this.data.editorial;b+="<br/><br/>Editorial:<br/><br/>";for(var h=g.length,c=0;h>c;c++){var f="<a class='info-content animate-015' href='"+g[c].url+"' target='_blank'>"+g[c].title+"</a>";b+=h-1>c?f+"<br /><br/>":f+"<br/><br/>"}var i=$("#content .mobile-content");i.html("<p id='title'>"+this.data.title+"</p><p class='desc'>"+b+"</p>");var j=$(".desc");$("#content").css("height",j.position().top+j.height()+30+"px"),contentController.scrollToContent(),this.callback&&this.callback()},b.prototype.resize=function(){if(this.preloader)return this.preloader.resize(0),void $("#content").css({top:$("#canvas").height()+"px"});var a=$("#content > .content-container > .container"),b=clamp(a.position().top+a.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight);contentController.currentContentSize=b,contentController.contentOpen&&contentController.setContentSize(b),this.scrollableContent&&(this.scrollableContent.scrollHeight=b-30,this.scrollableContent.targY=0)},b.prototype.cleanUp=function(){this.scrollableContent&&(contentController.unregister(this.scrollableContent),this.scrollableContent.cleanUp(),this.scrollableContent=null),this.data=null,this.bottomPadding=null,this.minContentHeight=null,this.maxContentHeight=null},a.InfoContent=b}(window),function(a){function b(a){this.name=a.name,this.init(a)}b.prototype.init=function(a){var b=THREE.ImageUtils.loadTexture(a.texture);b.anisotropy=a.anisotropy,b.minFilter=b.magFilter=THREE.LinearFilter,this.mesh=this.getMesh(a.geometry,b,a.scale,a.position,a.offset),this.outScale=this.mesh.scale.clone();var c=1e-4;this.mesh.scale.set(this.outScale.x*c,this.outScale.y*c,this.outScale.z*c);var d=1.25;this.overScale=new THREE.Vector3(this.outScale.x*d,this.outScale.y,this.outScale.z*d),this.targScale=this.outScale,this.canRender=!1},b.prototype.getMesh=function(a,b,c,d,e){var f=new THREE.MeshPhongMaterial({color:16777215,emissive:0,specular:197379,shininess:150,map:b});f.overdraw=!0;var g=new THREE.Mesh(a,f);return g.scale.set(c,c,c),g.castShadow=!0,g.position=d,g.translateY(e),g.userData.parent=this,g},b.prototype.transitionIn=function(a,b,c){if(!this.canRender){b=b||0;{var d=this,e={x:this.mesh.scale.x,y:this.mesh.scale.y,z:this.mesh.scale.z};new TWEEN.Tween(e).to({x:d.outScale.x,y:d.outScale.y,z:d.outScale.z},a).easing(TWEEN.Easing.Exponential.InOut).delay(b).onStart(function(){setTimeout(function(){contentController.mouseoverSound.play()},a/2)}).onUpdate(function(){d.mesh.scale.set(this.x,this.y,this.z)}).onComplete(function(){d.canRender=!0,c&&c()}).start()}}},b.prototype.render=function(){var a=this.mesh.scale;if(this.glitching)a.x=this.outScale.x+.25*Math.random()*this.outScale.x,a.z=this.outScale.z+.25*Math.random()*this.outScale.z;else if(this.canRender){var b=.3*fpsScalar;a.x+=(this.targScale.x-a.x)*b,a.y+=(this.targScale.y-a.y)*b,a.z+=(this.targScale.z-a.z)*b}},b.prototype.mouseover=function(){this.targScale=this.overScale},b.prototype.mouseout=function(){this.targScale=this.outScale
},b.prototype.glitch=function(){this.glitching=!0},b.prototype.reset=function(){this.glitching=!1},a.ModuleChunk=b}(window),function(a){function b(a){this.init(a)}b.prototype.init=function(a){this.mesh=new THREE.Object3D,this.light1=new THREE.Mesh(a.geometry,new THREE.MeshLambertMaterial({color:a.color,ambient:a.color,emissive:a.color})),this.light1.castShadow=!0,this.mesh.add(this.light1),this.light2=this.light1.clone(),this.light2.material=this.light1.material.clone(),this.light2.translateY(-a.spacing),this.mesh.add(this.light2),this.light3=this.light1.clone(),this.light3.material=this.light1.material.clone(),this.light3.translateY(a.spacing),this.mesh.add(this.light3);var b=1e-4;this.light1.scale.set(b,b,b),this.light2.scale.set(b,b,b),this.light3.scale.set(b,b,b),this.lights=[this.light1,this.light2,this.light3],this.tweens=[]},b.prototype.setColorHSL=function(a,b,c,d,e,f,g){var h=a.material,i=h.color.getHSL();e=e||1e3,f=f||0;var j={h:i.h,s:i.s,l:i.l},k=new TWEEN.Tween(j).to({h:b,s:c,l:d},e).easing(TWEEN.Easing.Linear.None).delay(f).onUpdate(function(){h.color.setHSL(this.h,this.s,this.l),h.ambient.setHSL(this.h,this.s,this.l),h.emissive.setHSL(this.h,this.s,this.l)}).onComplete(function(){g&&g()}).start();return k},b.prototype.setAllColorHSL=function(a,b,c,d,e,f){this.setColorHSL(this.light1,a,b,c,d,e),this.setColorHSL(this.light2,a,b,c,d,e),this.setColorHSL(this.light3,a,b,c,d,e,f)},b.prototype.setColorRGB=function(a,b,c,d,e,f,g){var h=a.material,i=h.color;e=e||1e3,f=f||0;var j={r:i.r,g:i.g,b:i.b},k=new TWEEN.Tween(j).to({r:b,g:c,b:d},e).easing(TWEEN.Easing.Linear.None).delay(f).onUpdate(function(){h.color.setRGB(this.r,this.g,this.b),h.ambient.setRGB(this.r,this.g,this.b),h.emissive.setRGB(this.r,this.g,this.b)}).onComplete(function(){g&&g()}).start();return k},b.prototype.setAllColorRGB=function(a,b,c,d,e,f){this.setColorRGB(this.light1,a,b,c,d,e),this.setColorRGB(this.light2,a,b,c,d,e),this.setColorRGB(this.light3,a,b,c,d,e,f)},b.prototype.glitchHSL=function(){for(var a=0;3>a;a++){var b=1,c=0,d=Math.random();this.lights[a].material.color.setHSL(b,c,d),this.lights[a].material.ambient.setHSL(b,c,d),this.lights[a].material.emissive.setHSL(b,c,d)}},b.prototype.reset=function(){this.glitchInterval&&(clearInterval(this.glitchInterval),this.glitchInterval=null)},b.prototype.pulseHSL=function(a,b,c,d,e,f){e=e||0;var g=this,h=this.setColorHSL(this.light3,a,b,c,d,0);h.yoyo(!0),h.repeat(1);var i=this.setColorHSL(this.light1,a,b,c,d,e);i.yoyo(!0),i.repeat(1);var j=this.setColorHSL(this.light2,a,b,c,d,2*e,function(){f&&f(),g.pulseHSL(a,b,c,d,e,f)});j.yoyo(!0),j.repeat(1),this.tweens=[h,i,j]},b.prototype.pulseRGB=function(a,b,c,d,e,f){var g=this.setColorRGB(a,b,c,d,e,f);return g.yoyo(!0),g.repeat(1/0),g},b.prototype.animateRandomlyHSL=function(a,b){{var c=Math.random(),d=Math.random(),e=Math.random(),f=this;this.setColorHSL(c,d,e,a,b,function(){f.animateRandomlyHSL(a,b)})}},b.prototype.clearTweens=function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].stop();this.tweens.length=0},b.prototype.turnOff=function(a,b,c){this.clearTweens();var d=this.light1.material.color.getHSL();this.setColorHSL(this.light1,d.h,d.s,0,a,b),this.setColorHSL(this.light2,d.h,d.s,0,a,b),this.setColorHSL(this.light3,d.h,d.s,0,a,b,function(){c&&c()})},b.prototype.turnOn=function(a,b,c){this.clearTweens();var d=this.light1.material.color.getHSL();this.setColorHSL(this.light1,d.h,d.s,1,a,b),this.setColorHSL(this.light2,d.h,d.s,1,a,b),this.setColorHSL(this.light3,d.h,d.s,1,a,b,function(){c&&c()})},b.prototype.transitionIn=function(a,b,c){a=a||500,b=b||0;{var d=this,e={x:this.light1.scale.x,y:this.light1.scale.y,z:this.light1.scale.z};new TWEEN.Tween(e).to({x:1,y:1,z:1},a).easing(TWEEN.Easing.Exponential.InOut).delay(b).onUpdate(function(){d.light1.scale.set(this.x,this.y,this.z),d.light2.scale.set(this.x,this.y,this.z),d.light3.scale.set(this.x,this.y,this.z)}).onComplete(function(){c&&c()}).start()}},a.ModuleLights=b}(window),function(a){function b(a){this.color=new THREE.Color(a.color),this.scalar=a.scalar,this.init()}b.prototype.init=function(){this.mesh=new THREE.Object3D,this.button=new THREE.Mesh(new THREE.CubeGeometry(.2,.1,.1),new THREE.MeshLambertMaterial({color:this.color,ambient:this.color,emissive:this.color})),this.button.scale.multiplyScalar(this.scalar),this.mesh.add(this.button),this.mesh.position.set(1.755,.28,-2).multiplyScalar(this.scalar)},b.prototype.turnOn=function(){this.setColorRGB(this.color.r,this.color.g,this.color.b)},b.prototype.turnOff=function(){this.setColorRGB(0,0,0)},b.prototype.setColorRGB=function(a,b,c,d,e,f){var g=this.button.material,h=g.color;d=d||1e3,e=e||0;var i={r:h.r,g:h.g,b:h.b},j=new TWEEN.Tween(i).to({r:a,g:b,b:c},d).easing(TWEEN.Easing.Linear.None).delay(e).onUpdate(function(){g.color.setRGB(this.r,this.g,this.b),g.ambient.setRGB(this.r,this.g,this.b),g.emissive.setRGB(this.r,this.g,this.b)}).onComplete(function(){f&&f()}).start();return j},a.ModulePowerButton=b}(window),function(a){function b(b){this.data=b.data,this.container=b.container,this.defaultScale=b.defaultScale,this.fgColor=b.fgColor,this.camera=b.camera,this.objectsToCheck=[],this.totalEffectAmount=0,this.horizontalEffectAmount=0,this.verticalEffectAmount=0,this.canRender=!1,this.glitching=!1,this.wasDragging=!1,this.isClickingModule=!1,this.parentStartY=this.container.parent.position.y,this.haveTransitionedIn=!1,this.renderer=b.renderer,this.init(b.geometries,b.loadCallback),a.abs=Math.abs}b.prototype.init=function(b,c){function d(){if(!f.dragging&&f.canRender&&!f.glitching&&!f.overModule&&(f.targRGBEffectAmount=30*Math.random(),f.targRGBEffectAmount>8&&world.enabled)){if(audioController.audioOn){var a=f.effects[Math.random()*f.effects.length|0];a.volume(f.targRGBEffectAmount/30),a.play()}var b=Math.random()*f.allModules.length|0;f.allModules[b].glitch(),world.staticElectricity.addStatic(Math.random()*(f.targRGBEffectAmount/3)|0),f.targRGBEffectAmount>25&&(Math.random()<.66&&(f.currentRotation.x+=4*Math.random()-2),Math.random()<.66&&(f.currentRotation.y+=4*Math.random()-2))}setTimeout(e,30)}function e(){f.targRGBEffectAmount=0;for(var a=0;a<f.allModules.length;a++)f.allModules[a].reset();setTimeout(d,3e3*Math.random())}var f=this,g=1.2,h=1.05*g,i=.01*g;this.canvas=$("#canvas"),this.content=$("#content"),this.body=$("body"),this.on=!1,this.lights=new ModuleLights({geometry:new THREE.CubeGeometry(3.8*g,.2*g,3.8*g),color:16777215,spacing:h}),this.container.add(this.lights.mesh);var j=this.renderer.getMaxAnisotropy();this.module1=new ModuleChunk({name:"Work",geometry:b.module1,texture:this.data.textures[0],scale:i,position:new THREE.Vector3(0,0,0),offset:2*h-h/2,anisotropy:j}),this.container.add(this.module1.mesh),this.module2=new ModuleChunk({name:"Play",geometry:b.module2,texture:this.data.textures[1],scale:i,position:this.module1.mesh.position.clone(),offset:-h,anisotropy:j}),this.container.add(this.module2.mesh),this.module3=new ModuleChunk({name:"Info",geometry:b.module3,texture:this.data.textures[2],scale:i,position:this.module2.mesh.position.clone(),offset:-h,anisotropy:j}),this.container.add(this.module3.mesh),this.module4=new ModuleChunk({name:"Connect",geometry:b.module4,texture:this.data.textures[3],scale:i,position:this.module3.mesh.position.clone(),offset:-h,anisotropy:j}),this.container.add(this.module4.mesh),this.powerButton=new ModulePowerButton({color:14291474,scalar:100}),this.module1.mesh.add(this.powerButton.mesh),this.lineMat1=new THREE.LineDashedMaterial({color:this.fgColor,dashSize:.16,gapSize:.16,lineWidth:1,transparent:!0}),this.lineMat2=new THREE.LineDashedMaterial({color:this.fgColor,dashSize:.04,gapSize:.02,lineWidth:1,transparent:!0}),this.wireframe=new THREE.BoxHelper(this.lineMat1),this.wireframe.material.transparent=!0,this.wireframe.material.opacity=.35,this.wireframe.scale.set(.1,.1,.1),this.wireframe.name="wireframe",this.container.add(this.wireframe),this.wireframe.visible=!1,this.objectsToCheck=[this.module1.mesh,this.module2.mesh,this.module3.mesh,this.module4.mesh],this.allModules=[this.module1,this.module2,this.module3,this.module4],this.hitBox=new THREE.Mesh(new THREE.CubeGeometry(9,9,9),new THREE.MeshBasicMaterial({color:65334,transparent:!0,opacity:0})),this.hitBox.renderDepth=-1e3,this.container.add(this.hitBox),this.lastMousePos={x:0,y:0},this.currentMousePos={x:0,y:0},this.yAxis=new THREE.Vector3(0,1,0),this.xAxis=new THREE.Vector3(1,0,0),this.targRotation=new THREE.Vector3(0,0,0),this.targScale=this.wireframe.scale.clone(),this.targPosition=new THREE.Vector3(0,0,0),this.currentRotation=new THREE.Vector3(0,0,0),this.mouse={x:0,y:0,enabled:!1},this.projector=new THREE.Projector,this.mousedown=!1,this.dragging=!1,this.targRGBEffectAmount=0,this.rgbEffectAmount=0,this.hoverAngle=0,this.mouseY=0,this.hitBoxIntersects=[],this.moduleIntersects=[],this.overModule=!1,setTimeout(d,3e3*Math.random()),this.startRotation=this.container.rotation.clone(),this.container.position.y=-4,this.initSounds(),a.inputController.register(this),c&&c()},b.prototype.initSounds=function(){this.loops=[],this.effects=[];for(var a=this.data.sounds.loops,b=0;b<a.length;b++){var c=audioController.createSound(a[b],!0,!0,0);this.loops.push(c)}for(var d=this.data.sounds.effects,b=0;b<d.length;b++){var c=audioController.createSound(d[b],!1,!1,0);this.effects.push(c)}this.mouseoverSound=audioController.createSound(this.data.sounds.mouseover,!1,!1,1),this.glitchSound=audioController.createSound(appData.world.sounds.glitch,!0,!0,0)},b.prototype.fadeInAudio=function(a){for(var b=0;b<this.loops.length;b++)audioController.fadeInSound(this.loops[b],1,a);for(var b=0;b<this.effects.length;b++)audioController.fadeInSound(this.effects[b],.5,a)},b.prototype.fadeOutAudio=function(a){for(var b=0;b<this.loops.length;b++)audioController.fadeOutSound(this.loops[b],a);for(var b=0;b<this.effects.length;b++)audioController.fadeOutSound(this.effects[b],a)},b.prototype.transitionIn=function(a){if(!this.haveTransitionedIn){this.haveTransitionedIn=!0,this.wireframe.visible=!0;var b=this;setTimeout(function(){world.effectsController.glitch(),audioController.audioOn&&world.glitchSound.play()},500),this.module1.transitionIn(1e3,200),this.module2.transitionIn(1e3,0),this.module3.transitionIn(1e3,150),this.module4.transitionIn(1e3,450,function(){b.lights.transitionIn(),world.effectsController.reset(),audioController.audioOn&&world.glitchSound.stop()}),this.turnOn(!0,a)}},b.prototype.turnOn=function(a,b){this.on=!0;var c=a?16*Math.random()-8:this.container.position.y;Math.abs(c)<3&&(c=Math.random()<.5?3:-3);{var d=degrees(this.container.rotation.x),e=degrees(this.container.rotation.y),f=0,g=this,h={y:c,rx:d,ry:e,rz:f,wScale:this.wireframe.scale.x,wOpacity:0,py:this.container.parent.position.y};new TWEEN.Tween(h).to({y:0,rx:45,ry:0,rz:0,wScale:g.defaultScale,wOpacity:g.wireframe.material.opacity,py:g.camera.position.y+.5*Math.sin(radians(g.hoverAngle))},2500).easing(TWEEN.Easing.Exponential.InOut).delay(0).onUpdate(function(){g.container.position.y=this.y,g.container.rotation.set(radians(this.rx),radians(this.ry),radians(this.rz)),g.container.parent.position.y=this.py,g.wireframe.scale.set(this.wScale,this.wScale,this.wScale),g.wireframe.material.opacity=this.wOpacity}).onComplete(function(){g.canRender=!0,b&&b()}).start()}this.lights.turnOn(2500,0,function(){}),this.powerButton.turnOn(),this.fadeInAudio(2500)},b.prototype.turnOff=function(a){this.on=!1,this.canRender=!1;{var b=this,c={y:this.container.position.y,rx:degrees(this.container.rotation.x),ry:degrees(this.container.rotation.y),rz:degrees(this.container.rotation.z),py:this.container.parent.position.y,wScale:this.wireframe.scale.x};new TWEEN.Tween(c).to({y:-8,rx:this.startRotation.x,ry:degrees(this.container.rotation.y),rz:this.startRotation.z,py:b.parentStartY,wScale:.1},2500).easing(TWEEN.Easing.Exponential.InOut).delay(0).onUpdate(function(){b.container.position.y=this.y,b.container.rotation.set(radians(this.rx),radians(this.ry),radians(this.rz)),b.container.parent.position.y=this.py,b.wireframe.scale.set(this.wScale,this.wScale,this.wScale)}).onComplete(function(){a&&a()}).start()}this.lights.turnOff(2500),this.powerButton.turnOff(),this.fadeOutAudio(2500)},b.prototype.render=function(){if(this.canRender){var a=.15*fpsScalar;if(this.rgbEffectAmount+=.3*(this.targRGBEffectAmount-this.rgbEffectAmount)*fpsScalar,this.isClickingModule||(this.targRotation.x=this.currentMousePos.y-this.lastMousePos.y,this.targRotation.y=this.currentMousePos.x-this.lastMousePos.x),this.diffY=this.targRotation.y-this.currentRotation.y,this.currentRotation.y+=this.diffY*a,this.rotateAroundWorldAxis(this.container,this.yAxis,radians(this.currentRotation.y)),this.diffX=this.targRotation.x-this.currentRotation.x,this.currentRotation.x+=this.diffX*a,this.rotateAroundWorldAxis(this.container,this.xAxis,radians(this.currentRotation.x)),this.horizontalEffectAmount=this.diffY/1e3,this.verticalEffectAmount=this.diffX/1e3,this.totalEffectAmount=(this.rgbEffectAmount+this.diffX+this.diffY)/1e3,this.dragging&&audioController.audioOn?this.glitchSound.volume(clamp(Math.abs(40*this.totalEffectAmount),0,1)):!this.dragging&&audioController.audioOn&&0!=this.glitchSound.volume()&&this.glitchSound.volume(0),this.hitBoxIntersects.length=0,this.moduleIntersects.length=0,this.mouseY<this.content.position().top&&(this.hitBoxIntersects=this.getIntersects([this.hitBox]),this.moduleIntersects=this.getIntersects(this.objectsToCheck)),this.mousedown||(this.dragging=!1,this.module1.mouseout(),this.module2.mouseout(),this.module3.mouseout(),this.module4.mouseout()),this.overModule=0!=this.moduleIntersects.length,this.overModule||(this.container.parent.position.y=this.camera.position.y+.5*Math.sin(radians(this.hoverAngle)),this.hoverAngle+=1.5*fpsScalar),this.hitBoxIntersects.length>0&&!contentController.isDraggingGallery())if(this.wireframe.material=this.lineMat2,this.wireframe.material.opacity=1,this.mousedown&&!this.overModule&&(this.dragging=!0,this.wasDragging=!0,this.setGrabbingCursor()),this.overModule||this.mousedown){if(this.overModule&&!this.mousedown&&this.mouse.active){this.targScale.set(5,.8,5);var b=this.moduleIntersects[0].object.position;this.targPosition.set(b.x,b.y,b.z),this.moduleIntersects[0].object.userData.parent.mouseover(),this.body.css("cursor","pointer"),contentController.messenger.setMessage(this.moduleIntersects[0].object.userData.parent.name,this.mouseoverSound)}}else this.targScale.set(5,5,5),this.targPosition.set(0,0,0),this.setGrabCursor(),contentController.messenger.removeMessage();else this.dragging||this.mousedown||($("body").css("cursor","default"),this.targScale.set(this.defaultScale,this.defaultScale,this.defaultScale),this.targPosition.set(0,0,0),this.wireframe.material=this.lineMat1,this.wireframe.material.opacity=.35,contentController.messenger.removeMessage());this.module1.render(),this.module2.render(),this.module3.render(),this.module4.render(),this.lights.glitchHSL();var c=this.wireframe.scale;c.x+=(this.targScale.x-c.x)*a,c.y+=(this.targScale.y-c.y)*a,c.z+=(this.targScale.z-c.z)*a;var d=this.wireframe.position;d.x+=(this.targPosition.x-d.x)*a,d.y+=(this.targPosition.y-d.y)*a,d.z+=(this.targPosition.z-d.z)*a,this.lastMousePos.x=this.currentMousePos.x,this.lastMousePos.y=this.currentMousePos.y}},b.prototype.setGrabCursor=function(){$.browser.webkit?this.body.css("cursor","-webkit-grab"):$.browser.mozilla?this.body.css("cursor","-moz-grab"):this.body.css("cursor","move")},b.prototype.setGrabbingCursor=function(){$.browser.webkit?this.body.css("cursor","-webkit-grabbing"):$.browser.mozilla?this.body.css("cursor","-moz-grabbing"):this.body.css("cursor","move")},b.prototype.resetMouse=function(){$("body").css("cursor","default"),contentController.messenger.removeMessage()},b.prototype.getIntersects=function(a){if(!this.mouse.enabled)return[];var b=new THREE.Vector3(this.mouse.x,this.mouse.y,1);this.projector.unprojectVector(b,this.camera);var c=new THREE.Raycaster(this.camera.position,b.sub(this.camera.position).normalize()),d=c.intersectObjects(a);return d},b.prototype.rotateAroundWorldAxis=function(a,b,c){var d=new THREE.Matrix4;d.makeRotationAxis(b.normalize(),c),d.multiply(a.matrix),a.matrix=d,a.rotation.setFromRotationMatrix(a.matrix)},b.prototype.handleMouseMove=function(b){var c=this.canvas.position().top;this.mouse.x=b.clientX/a.innerWidth*2-1,this.mouse.y=2*-((b.clientY-c)/a.innerHeight)+1,this.mouse.active||(this.mouse.active=!0),this.mouseY=b.clientY,this.dragging&&(this.currentMousePos.x=b.clientX,this.currentMousePos.y=b.clientY),this.mouse.enabled||(this.mouse.enabled=!0)},b.prototype.handleMouseDown=function(a){this.currentMousePos.x=a.clientX,this.currentMousePos.y=a.clientY,this.lastMousePos.x=this.currentMousePos.x,this.lastMousePos.y=this.currentMousePos.y,this.mousedown=!0,this.getIntersects(this.objectsToCheck).length>0&&(this.isClickingModule=!0)},b.prototype.handleMouseUp=function(){this.mousedown=!1,this.isClickingModule=!1},b.prototype.handleClick=function(){if(!this.wasDragging&&this.mouseY<this.content.position().top&&world.enabled){var a=this.getIntersects(this.objectsToCheck);if(a.length>0)if(this.on){var b=a[0].object.userData.parent.name;router.setRoute(b)}else this.turnOn()}this.wasDragging=!1},b.prototype.glitch=function(){this.glitching=!0;for(var a=0;a<this.allModules.length;a++)this.allModules[a].glitch()},b.prototype.reset=function(){this.glitching=!1;for(var a=0;a<this.allModules.length;a++)this.allModules[a].reset()},a.Module=b}(window),function(a){function b(a){this.numParticles=a.numParticles,this.minParticleSize=a.minParticleSize,this.maxParticleSize=a.maxParticleSize,this.container=a.container,this.color=a.color,this.blending=a.blending,this.rotation=a.rotation,this.texture=a.texture,this.init()}b.prototype.init=function(){this.particles=new THREE.Geometry;for(var a=new THREE.ParticleSystemMaterial({color:this.color,size:this.minParticleSize==this.maxParticleSize?this.minParticleSize:this.minParticleSize+Math.random()*(this.maxParticleSize-this.minParticleSize),map:THREE.ImageUtils.loadTexture(this.texture),blending:this.blending,opacity:.5,transparent:!0}),b=25,c=50,d=0;d<this.numParticles;d++){var e=Math.random()*c-b,f=Math.random()*c-b,g=Math.random()*c-b,h=new THREE.Vector3(e,f,g);h.velocity=new THREE.Vector3(0,.1*Math.random(),0),h.velocityAngle=radians(360*Math.random()),h.ocsillationAmount=Math.random(),h.ocsillationSpeed=.01*Math.random(),h.startY=f,this.particles.vertices.push(h)}this.system=new THREE.ParticleSystem(this.particles,a),this.system.sortParticles=!0,this.container.add(this.system)},b.prototype.render=function(){for(var a=this.numParticles;a--;){var b=this.particles.vertices[a];b.y=b.startY+Math.sin(b.velocityAngle)*b.ocsillationAmount,b.velocityAngle+=b.ocsillationSpeed}this.system.geometry.verticesNeedUpdate=!0,this.system.rotation.y+=this.rotation},a.ParticleSystem=b}(window),function(a){function b(a){this.radius=a.radius,this.color=a.color,this.container=a.container,this.init()}b.prototype.init=function(){this.material=new THREE.LineBasicMaterial({color:this.color})},b.prototype.addStatic=function(a){function b(){for(var b=0;a>b;b++){for(var d=3+(2*Math.random()|0),e=new THREE.Geometry,f=Math.random(),g=Math.random(),h=0;d>h;h++){var i=pointOnSphere(c.radius,f,g),j=new THREE.Vector3(i[0],i[1],i[2]);e.vertices.push(j),f+=.25*Math.random(),g+=.25*Math.random()}var k=new THREE.Line(e,c.material);c.container.add(k),c.removeStatic(k,20)}}a=a||1;var c=this;b(),setTimeout(b,100),Math.random()<.5&&setTimeout(b,200)},b.prototype.removeStatic=function(a,b){var c=this;setTimeout(function(){c.container.remove(a),a.geometry.dispose()},b)},a.StaticElectricity=b}(window),function(a){function b(b){this.items=b.items,this.baseUrl=b.baseUrl,this.container=b.container,this.easing=b.easing||.3,this.mouseBuffer=b.mouseBuffer||.15*a.innerWidth,this.customMouseBuffer=void 0!=b.mouseBuffer,this.mouseoverSound=b.mouseoverSound,this.targX=0,this.currentX=0,this.enabled=!0,this.currentIndex=0,this.currentThumb=null,this.canNavigate=!1,this.wasDragging=!1,this.loadStore=b.loadStore,this.body=$("body"),isMobile?this.initMobile():this.init(b.loadCallback)}b.prototype.init=function(){for(var b="",c=this.items.length,d=this,e=0;c>e;e++){var f=this.items[e];b+="<div id='"+f.id+"' class='thumb-container'><img src='"+this.loadStore[this.baseUrl+f.thumb].src+"' class='thumb' /><div class='thumb-overlay animate-015'><div class='thumb-overlay-text'><p class='title'>"+f.title+"</p><p class='desc'>"+f.desc+"</p><p class='type'>Type / "+f.type+"</p><p class='year'>Year / "+f.year+"</p><p class='load-msg'></p></div></div></div>"}this.container.html(b),isMobile||(this.scrollbar=new Scrollbar({container:this.container.parent(),color:new THREE.Color(world.getColorForSection(contentController.currentSectionName)).getHexString(),callback:function(a){var b=-(d.galleryWidth-d.windowWidth+55);d.targX=clamp(b*a,b,0)}}),this.container.parent().append(this.scrollbar.view)),$(".thumb-container").mouseover(function(){d.enabled&&!d.dragging&&($(this).find(".thumb-overlay").css("top","0px"),move($(this).find(".thumb")[0]).ease("ease-out-quint").scale(1.25).delay("0.15s").duration("0.35s").end(),audioController.audioOn&&d.mouseoverSound.play())}).mouseout(function(){if(d.enabled){$(this).find(".thumb-overlay").css("top","-100%");var a=$(this).find(".thumb")[0];move(a).ease("ease-out-quint").scale(1).y(0).delay(0).duration("0.35s").end()}}).click(function(){d.enabled&&!d.wasDragging?(d.currentThumb=$(this),d.currentIndex=d.getIndexForId(this.id),d.expand(this.id)):d.wasDragging&&(d.wasDragging=!1)}),inputController.register(this),this.container.mousewheel(function(a){d.handleMouseWheel(a)}),this.container.on("mousewheel",function(a){d.handleMouseWheel(a)}),this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width(),this.galleryWidth<this.windowWidth&&this.scrollbar&&this.scrollbar.hide(),setTimeout(function(){d.resize()},500)},b.prototype.initMobile=function(){for(var a="",b=this.items.length,c=0;b>c;c++){var d=this.items[c];a+="<div id='"+d.id+"' class='thumb-container-mobile'><img src='"+this.loadStore[this.baseUrl+d.thumb].src+"' class='thumb-mobile' /><div class='thumb-overlay-mobile'><div class='thumb-overlay-text-mobile'><p class='title'>"+d.title+"</p></div></div></div>"}this.htmlString=a},b.prototype.registerMobileThumbClicks=function(){var a=this;$(".thumb-container-mobile").click(function(){a.enabled&&(a.currentThumb=$(this),a.currentIndex=a.getIndexForId(this.id),a.expand(this.id))})},b.prototype.expand=function(a){var b=this;isMobile?contentController.expandForMobile(this.getItemForId(a),function(){b.canNavigate=!0}):(this.enabled=!1,contentController.expand(this.getItemForId(a),function(){b.canNavigate=!0}))},b.prototype.collapse=function(){var a=this;isMobile?contentController.collapseForMobile(function(){a.enabled=!0}):contentController.collapse(function(){a.enabled=!0})},b.prototype.expandCurrent=function(){var a=this.getThumbForId(this.items[this.currentIndex].id);$(a).mouseover(),$(a).click()},b.prototype.expandClosest=function(){var a=this.getClosestThumb();a.mouseover(),a.click()},b.prototype.nextItem=function(){this.galleryWidth=this.container.width(),this.currentIndex++,this.currentIndex>=this.items.length&&(this.currentIndex=0),this.gotoCurrentThumb()},b.prototype.prevItem=function(){this.galleryWidth=this.container.width(),this.currentIndex--,this.currentIndex<=-1&&(this.currentIndex=this.items.length-1),this.gotoCurrentThumb()},b.prototype.scrollToNextItem=function(){this.galleryWidth=this.container.width(),this.currentIndex++,this.currentIndex>=this.items.length&&(this.currentIndex=0);var a=this.getThumbForId(this.items[this.currentIndex].id);this.targX=clamp(-$(a).position().left,-(this.galleryWidth-this.windowWidth+55),0),this.updateScrollbarPosition()},b.prototype.scrollToPrevItem=function(){this.galleryWidth=this.container.width(),this.currentIndex--,this.currentIndex<=-1&&(this.currentIndex=this.items.length-1);var a=this.getThumbForId(this.items[this.currentIndex].id);this.targX=clamp(-$(a).position().left,-(this.galleryWidth-this.windowWidth+55),0),this.updateScrollbarPosition()},b.prototype.scrollLeft=function(a){this.targX=clamp(this.targX+a,-(this.galleryWidth-this.windowWidth+55),0),this.updateScrollbarPosition()},b.prototype.scrollRight=function(a){this.targX=clamp(this.targX-a,-(this.galleryWidth-this.windowWidth+55),0),this.updateScrollbarPosition()},b.prototype.getClosestThumb=function(){var a=null,b=this.currentX,c=9999999999;return $(".thumb-container").each(function(){var d=Math.abs($(this).position().left+b);c>d&&(c=d,a=$(this))}),a},b.prototype.disable=function(){this.enabled=!1,this.scrollbar&&(this.scrollbar.enabled=!1)},b.prototype.enable=function(){this.enabled=!0,this.scrollbar&&(this.scrollbar.enabled=!0)},b.prototype.gotoCurrentThumb=function(){var a=this.getThumbForId(this.items[this.currentIndex].id);this.targX=clamp(-$(a).position().left,-(this.galleryWidth-this.windowWidth+55),0),this.currentX=clamp(-$(a).position().left,-(this.galleryWidth-this.windowWidth+55),0),this.canNavigate=!1,this.container.position().left==this.currentX||this.galleryWidth<this.windowWidth?(this.galleryWidth<this.windowWidth&&(this.targX=0,this.currentX=0),$(a).mouseover(),$(a).click()):move(this.container[0]).ease("ease-in-out-quint").set("left",this.currentX+"px").duration("0.5s").end(function(){$(a).mouseover(),$(a).click()}),this.updateScrollbarPosition()},b.prototype.clearThumbMouseover=function(a){a.find(".thumb-overlay").css("top","-100%"),move(a.find(".thumb")[0]).ease("ease-out-quint").scale(1).duration("0.05s").end()},b.prototype.clearAllThumbMouseovers=function(){$(".thumb-container").each(function(){$(this).find(".thumb-overlay").css("top","-100%"),move($(this).find(".thumb")[0]).ease("ease-out-quint").scale(1).duration("0.05s").end()})},b.prototype.getItemForId=function(a){for(var b=null,c=this.items.length,d=0;c>d;d++)if(this.items[d].id==a){b=this.items[d];break}return b},b.prototype.getIndexForId=function(a){for(var b=-1,c=this.items.length,d=0;c>d;d++)if(this.items[d].id==a){b=d;break}return b},b.prototype.getThumbForId=function(a){var b=null;return $(".thumb-container").each(function(){return this.id==a?(b=this,!0):void 0}),b},b.prototype.getNextItemName=function(){var a=this.currentIndex+1;return a>=this.items.length&&(a=0),void 0!=this.items[a].shortTitle?this.items[a].shortTitle:this.items[a].title},b.prototype.getPrevItemName=function(){var a=this.currentIndex-1;return-1>=a&&(a=this.items.length-1),void 0!=this.items[a].shortTitle?this.items[a].shortTitle:this.items[a].title},b.prototype.handleMouseWheel=function(b){if(this.enabled){this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width();var c=-(this.galleryWidth-this.windowWidth+55);if(b.clientY>=this.container.offset().top&&this.galleryWidth>this.windowWidth){var d=Math.abs(b.deltaY)>Math.abs(b.deltaX)?b.deltaY:-b.deltaX;d*=b.deltaFactor,this.targX+=d,this.targX=clamp(this.targX,c,0)}else this.galleryWidth<this.windowWidth&&(this.targX=0);this.updateScrollbarPosition()}},b.prototype.handleMouseDown=function(a){this.enabled&&a.clientY>=this.container.offset().top&&a.clientY<$(this.scrollbar.view).offset().top&&this.galleryWidth>this.windowWidth&&(this.lastTargX=this.targX,this.pickupX=a.clientX,this.dragging=!0,this.haveCleared=!1)},b.prototype.handleMouseUp=function(){this.enabled&&(this.wasDragging=Math.abs(this.lastTargX-this.targX)>50,this.dragging=!1,this.container.css("pointerEvents","auto"),"default"!==this.body.css("cursor")&&this.body.css("cursor","default"))},b.prototype.handleMouseMove=function(a){if(this.enabled&&this.dragging){var b=-(this.galleryWidth-this.windowWidth+55);this.targX=this.lastTargX+(a.clientX-this.pickupX),this.targX=clamp(this.targX,b,0),this.updateScrollbarPosition(),"ew-resize"!==this.body.css("cursor")&&(this.container.css("pointerEvents","none"),this.body.css("cursor","ew-resize"))}},b.prototype.render=function(){this.enabled&&(this.currentX+=(this.targX-this.currentX)*this.easing*fpsScalar,this.scrollbar&&this.scrollbar.render(),this.container.css("left",this.currentX+"px"))},b.prototype.resize=function(){this.customMouseBuffer||(this.mouseBuffer=.15*a.innerWidth),this.windowWidth=a.innerWidth,this.galleryWidth=this.container.width();var b=-(this.galleryWidth-this.windowWidth+55);this.targX=clamp(this.targX,b,0),this.scrollbar&&this.scrollbar.resize(),this.updateScrollbarPosition(),this.galleryWidth<this.windowWidth?this.scrollbar&&this.scrollbar.hide():this.scrollbar&&this.scrollbar.show()},b.prototype.updateScrollbarPosition=function(){if(this.scrollbar){var a=-(this.galleryWidth-this.windowWidth+55);this.scrollbar.setValue(map(this.targX,a,0,1,0))}},b.prototype.cleanUp=function(){inputController.unregister(this),this.scrollbar&&this.scrollbar.cleanUp(),this.container&&(this.container.off("mousewheel"),this.container.html(""),this.container.css("left","0px")),isMobile&&$("#content").html(""),this.items=null,this.baseUrl=null,this.container=null,this.easing=null,this.mouseBuffer=null,this.targX=null,this.currentX=null,this.windowWidth=null,this.galleryWidth=null,this.enabled=null,this.currentIndex=null,this.currentThumb=null,this.scrollbar=null},a.ThumbGallery=b}(window),function(a){function b(a){this.data=a.data,this.bottomPadding=a.bottomPadding,this.minContentHeight=a.minContentHeight,this.maxContentHeight=a.maxContentHeight,this.callback=a.callback,this.loadContent()}b.prototype.loadContent=function(){for(var a=this,b=contentController.currentSectionName,c=[],d=this.data.baseUrl,e=this.data.items,f=e.length,g=0;f>g;g++)c.push(d+e[g].thumb);this.preloader=new Preloader({files:c,parent:document.body,topOffset:0,barColor:"#0c0c0c",message:getLoadingMessage(b.capitalize())}),this.preloader.load(function(b){a.preloader.cleanUp(),a.preloader=null,isMobile?a.initMobile(b):a.init(b)})},b.prototype.init=function(a){var b=this,c=$("#content > .content-container > .container");this.thumbGallery=new ThumbGallery({items:this.data.items,baseUrl:this.data.baseUrl,container:c,easing:.2,mouseoverSound:contentController.mouseoverSound,loadStore:a}),contentController.updateThumbColors(contentController.currentSectionName);var d=clamp(c.position().top+c.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight);contentController.currentContentSize=d,contentController.setContentSize(d,!0,function(){contentController.register(b.thumbGallery),b.data.title&&contentController.typeTitle(b.data.title),b.data.desc&&contentController.typeCopy(b.data.desc,!1,function(){contentController.initLinkSounds()}),b.callback&&b.callback()})},b.prototype.initMobile=function(a){var b=this.data.desc.replaceAll("~","<br/><br/>")+"<br/><br/>",c=$("#content .mobile-content");this.thumbGallery=new ThumbGallery({items:this.data.items,baseUrl:this.data.baseUrl,loadStore:a}),b+=this.thumbGallery.htmlString,c.html("<p id='title'>"+this.data.title+"</p><p>"+b+"</p>"),this.thumbGallery.registerMobileThumbClicks();var d=$(".thumb-container-mobile").last();$("#content").css("height",d.position().top+d.height()+30+"px"),contentController.scrollToContent(),this.callback&&this.callback()},b.prototype.expandCurrent=function(){this.thumbGallery&&this.thumbGallery.expandCurrent()},b.prototype.expandClosest=function(){this.thumbGallery&&this.thumbGallery.expandClosest()},b.prototype.nextItem=function(){this.thumbGallery&&this.thumbGallery.canNavigate&&this.thumbGallery.nextItem()},b.prototype.prevItem=function(){this.thumbGallery&&this.thumbGallery.canNavigate&&this.thumbGallery.prevItem()},b.prototype.scrollToNextItem=function(){this.thumbGallery&&this.thumbGallery.scrollToNextItem()},b.prototype.scrollToPrevItem=function(){this.thumbGallery&&this.thumbGallery.scrollToPrevItem()},b.prototype.getNextItemName=function(){return this.thumbGallery.getNextItemName()},b.prototype.getPrevItemName=function(){return this.thumbGallery.getPrevItemName()},b.prototype.resize=function(){if(this.preloader)return this.preloader.resize(0),void $("#content").css({top:$("#canvas").height()+"px"});
var b=$("#content > .content-container > .container"),c=0;contentController.expanded?(c=a.innerHeight,contentController.currentContentSize=clamp(b.position().top+b.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight)):(c=clamp(b.position().top+b.height()+this.bottomPadding,this.minContentHeight,this.maxContentHeight),contentController.currentContentSize=c),contentController.contentOpen&&(contentController.setContentSize(c),contentController.expanded?($("#content .content-container").css("top",a.innerHeight+"px"),$("#content .full-item-container").css("top","0px")):($("#content .content-container").css("top","0px"),$("#content .full-item-container").css("top",-a.innerHeight+"px")))},b.prototype.cleanUp=function(){this.thumbGallery&&(contentController.unregister(this.thumbGallery),this.thumbGallery.cleanUp(),this.thumbGallery=null),this.data=null,this.bottomPadding=null,this.minContentHeight=null,this.maxContentHeight=null},a.WorkPlayContent=b}(window),function(a){function b(a){this.data=a.data,this.colors=a.colors,this.currentColor=a.colors.home,this.fgColor=a.colors.fgColor,this.moduleGeometries=a.moduleGeometries,this.init(a.loadCallback)}b.prototype.init=function(a){this.section="home",isFull?this.initFull(a):isMobile?this.initMobile(a):this.initStatic(a)},b.prototype.initFull=function(b){function c(){g++,g==f&&b&&b()}this.enabled=!0,this.glitchSound=audioController.createSound(this.data.sounds.glitch,!1,!0,1),this.resolution=1,this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(a.innerWidth,a.innerHeight),this.renderer.setClearColor(this.currentColor,1),this.renderer.domElement.id="canvas",document.body.appendChild(this.renderer.domElement),this.camera=new THREE.PerspectiveCamera(37,a.innerWidth/a.innerHeight,1,1e3),this.camera.position.set(0,7,30),this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(this.currentColor,30,50),this.container=new THREE.Object3D,this.scene.add(this.container),this.ground=new Ground({container:this.container,color:this.currentColor,size:1e3,segments:100}),this.outerCubeContainer=new THREE.Object3D,this.outerCubeContainer.position.y=this.camera.position.y,this.container.add(this.outerCubeContainer),this.cubeContainer=new THREE.Object3D,this.outerCubeContainer.add(this.cubeContainer),this.staticElectricity=new StaticElectricity({radius:6,color:16777215,container:this.cubeContainer}),this.defaultScale=3,this.objectsToCheck=[];for(var d=this.data.module.textures,e=d.length,f=1+e,g=0,h=0;e>h;h++){var i=new Image;i.onload=c,i.src=d[h]}this.module=new Module({data:this.data.module,container:this.cubeContainer,defaultScale:this.defaultScale,fgColor:this.fgColor,camera:this.camera,loadCallback:c,geometries:this.moduleGeometries,renderer:this.renderer});var j=new THREE.DirectionalLight(16777215,1);j.position.x=-35,j.position.y=100,j.position.z=35,j.intensity=.8,j.castShadow=!0,j.shadowCameraNear=1,j.shadowCameraFar=this.camera.far,j.shadowMapBias=.0039,j.shadowMapDarkness=.75,j.shadowMapWidth=1024,j.shadowMapHeight=1024;var k=10;j.shadowCameraLeft=-k,j.shadowCameraRight=k,j.shadowCameraTop=k,j.shadowCameraBottom=-k,this.scene.add(j);var l=new THREE.AmbientLight(5987163);this.scene.add(l),this.renderer.shadowMapEnabled=!0,this.renderer.shadowMapType=THREE.PCFShadowMap,this.composer=new THREE.EffectComposer(this.renderer),this.composer.addPass(new THREE.RenderPass(this.scene,this.camera)),this.effectsController=new EffectsController({composer:this.composer,module:this.module,camera:this.camera,cameraShake:!0,flash:!0,antialias:!1}),this.renderer.autoClear=!1},b.prototype.initMobile=function(a){this.scene=document.createElement("div"),this.scene.id="canvas",document.body.appendChild(this.scene);var b=Math.floor(Math.random()*this.data.home.mobile.length),c=this.data.home.mobile[b];this.background=this.getStaticBackground(c,0,!1,function(){a&&a()}),this.scene.appendChild(this.background),$(this.scene).addClass("static-bg")},b.prototype.initStatic=function(a){this.scene=document.createElement("div"),this.scene.id="canvas",document.body.appendChild(this.scene);var b=Math.floor(Math.random()*this.data.home.static.length),c=this.data.home.static[b];this.background=this.getStaticBackground(c,0,!1,function(){a&&a()}),this.scene.appendChild(this.background),$(this.scene).addClass("static-bg")},b.prototype.getStaticBackground=function(a,b,c,d){var e=document.createElement("div");e.style.backgroundPosition="center center",e.style.backgroundSize="cover",e.style.zIndex=b,$(e).addClass("background");var f=new Image;return f.onload=function(){if(e.style.backgroundImage="url('"+f.src+"')",c){new TWEEN.Tween({a:0}).to({a:1},800).easing(TWEEN.Easing.Exponential.Out).delay(0).onUpdate(function(){$(e).css({opacity:this.a,filter:"alpha(opacity="+100*this.a+")"})}).onComplete(function(){d&&d()}).start()}else d&&d()},f.src=this.data.baseUrl+a,e},b.prototype.render=function(){isFull&&(this.module.render(),this.ground.transitioning&&this.ground.render(),this.effectsController.update(),this.renderer.clear(),this.composer.render())},b.prototype.resize=function(){isFull&&(this.renderer.setSize(a.innerWidth/this.resolution,a.innerHeight/this.resolution),this.composer.setSize(a.innerWidth/this.resolution,a.innerHeight/this.resolution),this.camera.aspect=a.innerWidth/a.innerHeight,this.camera.updateProjectionMatrix(),this.effectsController.resize(),this.module.render(),this.renderer.clear(),this.composer.render())},b.prototype.setResolution=function(a){this.resolution!=a&&(this.resolution=a,this.resize())},b.prototype.disableVignette=function(){this.effectsController.disableVignette()},b.prototype.enableVignette=function(){this.effectsController.enableVignette()},b.prototype.goto=function(a,b){if(this.section==a)return void(b&&b());if(this.section=a,isFull)"home"===a?this.disableVignette():this.enableVignette(),this.setColor(this.colors[a.toLowerCase()],b);else{var c=this,d=null!=this.background?this.background.zIndex+1:1,e=isMobile?this.data[a].mobile:this.data[a].static,f=Math.floor(Math.random()*e.length),g=e[f],h=this.getStaticBackground(g,d,!0,function(){c.scene.removeChild(c.background),c.background=h,b&&b()});this.scene.appendChild(h)}this.updateLinkColors(a)},b.prototype.getColorForSection=function(a){return this.colors[a.toLowerCase()]},b.prototype.setColor=function(a,b){if(this.currentColor!=a){{var c=new THREE.Color(this.currentColor),d=new THREE.Color(a),e=this;new TWEEN.Tween(c).to({r:d.r,g:d.g,b:d.b},1e3).easing(TWEEN.Easing.Linear.None).delay(0).onStart(function(){e.ground.glitch(),e.effectsController.glitch(),audioController.audioOn&&e.glitchSound.play()}).onUpdate(function(){e.renderer.setClearColor(this),e.scene.fog.color.set(this),e.ground.setColor(this)}).onComplete(function(){e.ground.reset(),e.effectsController.reset(),audioController.audioOn&&e.glitchSound.stop(),b&&b()}).start()}this.currentColor=a}},b.prototype.updateLinkColors=function(a){this.removeLinkColors(),"home"!=a&&($("a.nav-item").addClass(a),$("a.title").addClass(a))},b.prototype.removeLinkColors=function(){$("a.nav-item").removeClass("work info play connect"),$("a.title").removeClass("work info play connect")},b.prototype.cleanUp=function(){this.enabled=!1,document.body.removeChild(this.renderer.domElement),$("body").css("cursor","default"),this.renderer=null,this.camera=null,this.scene=null,this.container=null,this.ground=null,this.outerCubeContainer=null,this.cubeContainer=null,this.defaultScale=null,this.objectsToCheck=null,this.module=null,this.composer=null,this.effectsController=null},a.World=b}(window),function(a){function b(){this.init()}b.prototype.init=function(){isStatic?this.setAsStatic():isMobile&&this.setAsMobile(),$("#logo > .title").click(function(a){a.preventDefault(),router.setRoute("")}),this.initNavBtns(),this.setAvailableButtonState(a.appData.available||"Yep"),$(".nav-container").css("visibility","visible")},b.prototype.initNavBtns=function(){var a=this;$(".nav-item").on("click",function(b){b.preventDefault(),a.handleNavClick($(this).data("id"),$(this))}),$(".standalone").off("click")},b.prototype.transitionIn=function(){var a=$("#logo .nav-container .nav"),b={y:a.position().top};this.navTween&&this.navTween.stop(),this.navTween=new TWEEN.Tween(b).to({y:0},150).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){a.css("top",this.y+"px")}).start()},b.prototype.show=function(){},b.prototype.hide=function(){},b.prototype.disable=function(){$("#logo").css("pointerEvents","none")},b.prototype.enable=function(){$("#logo").css("pointerEvents","auto")},b.prototype.handleNavClick=function(a,b){switch(a){case"sounds":audioController.toggleAudio(),b.html(audioController.audioOn?"Sounds:Yep":"Sounds:Nope");break;default:router.setRoute(a)}},b.prototype.setSoundButtonState=function(a){var b=$(".sound-btn");b.html(1==a?"Sounds:Yep":"Sounds:Nope")},b.prototype.setAvailableButtonState=function(a){var b=isMobile?"Available / "+a:"Available: "+a;$(".avail-btn").html(b)},b.prototype.setAsStatic=function(){var a=$("#logo .nav-container .nav");a.html('<a data-id="work" href="#" class="nav-item animate-015">Work</a> / <a data-id="play" href="#" class="nav-item animate-015">Play</a> / <a data-id="info" href="#" class="nav-item animate-015">Info</a> / <a data-id="connect" href="#" class="nav-item animate-015 connect-btn">Connect</a> / <a data-id="availability" href="mailto:john@mystaticself.com" class="nav-item avail-btn animate-015 standalone">Available:Yep</a>'),this.show()},b.prototype.setAsMobile=function(){var a=$("#logo .nav-container .nav");a.html('<br/><a data-id="work" href="#" class="nav-item animate-015">Work</a><br/><a data-id="play" href="#" class="nav-item animate-015">Play</a><br/><a data-id="info" href="#" class="nav-item animate-015">Info</a><br/><a data-id="connect" href="#" class="nav-item animate-015 connect-btn">Connect</a><br/><a data-id="availability" href="mailto:john@mystaticself.com" class="nav-item avail-btn animate-015 standalone">Available:Yep</a>'),a.css("lineHeight","15px"),this.enable()},b.prototype.refreshButtonStates=function(){$("#logo > .title").css("color","#fff"),$(".nav-item").css("color","#fff")},b.prototype.resize=function(){},a.Nav=b}(window),function(a){function b(a){this.color=a.color,this.container=a.container,this.callback=a.callback,this.init()}b.prototype.init=function(){this.value=0,this.pickupX=0,this.dragging=!1,this.min=30,this.x=this.min,this.offsetX=0,this.targX=this.min,this.enabled=!0,this.view=document.createElement("div"),$(this.view).addClass("scrollbar"),this.container.append(this.view),inputController.register(this),this.resize()},b.prototype.handleMouseDown=function(a){this.mouseIsOver(a)&&this.enabled&&(this.offsetX=a.clientX-this.x,this.lastX=this.x,this.pickupX=a.clientX,this.dragging=!0)},b.prototype.handleMouseUp=function(){this.dragging=!1},b.prototype.handleMouseMove=function(a){if(this.dragging&&this.enabled){var b=a.clientX-this.lastX;this.x=clamp(this.lastX+b-this.offsetX,this.min,this.max),this.targX=this.x,this.view.style.left=this.x+"px",this.value=map(this.x,this.min,this.max,0,1),this.callback&&this.callback(this.value)}},b.prototype.setValue=function(a){this.value=a,this.targX=map(this.value,0,1,this.min,this.max)},b.prototype.render=function(){this.enabled&&(this.x+=.3*(this.targX-this.x),this.view.style.left=this.x+"px")},b.prototype.resize=function(){this.max=a.innerWidth-this.min-$(this.view).width()},b.prototype.hide=function(){$(this.view).css("visibility","hidden")},b.prototype.show=function(){$(this.view).css("visibility","visible")},b.prototype.mouseIsOver=function(a){var b=$(this.view),c=this.x,d=b.offset().top,e=b.width(),f=b.height(),g=a.clientX,h=a.clientY,i=!1;return g>=c&&c+e>=g&&h>=d&&d+f>=h&&(i=!0),i},b.prototype.cleanUp=function(){inputController.unregister(this),$(this.view).remove(),this.container=null,this.callback=null,this.value=null,this.pickupX=null,this.dragging=null,this.min=null,this.x=null,this.offsetX=null,this.view=null},a.Scrollbar=b}(window),function(a){function b(){this.init()}b.prototype.init=function(){this.audioOn=!1,html5StorageSupported()&&isFull&&null!=localStorage.audioOn&&void 0!=localStorage.audioOn&&(this.audioOn="true"===localStorage.audioOn),nav.setSoundButtonState(this.audioOn),this.audioOn||Howler.mute(),this.sounds=[]},b.prototype.createSound=function(a,b,c,d){var e=new Howl({urls:a,autoplay:b,loop:c,volume:d});return this.sounds.push(e),e},b.prototype.destroySound=function(a){var b=this.sounds.indexOf(a);-1!=b&&this.sounds.splice(b,1),a.unload()},b.prototype.playSound=function(a){this.audioOn&&isFull&&a.play()},b.prototype.stopSound=function(a){a.stop()},b.prototype.toggleAudio=function(){this.audioOn=!this.audioOn,this.audioOn?this.unmuteAll():this.muteAll(),html5StorageSupported()&&(localStorage.audioOn=this.audioOn)},b.prototype.fadeOutAll=function(a){{var b={v:Howler.volume()};new TWEEN.Tween(b).to({v:0},1e3).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){Howler.volume(this.v)}).onComplete(function(){a&&a()}).start()}},b.prototype.fadeInAll=function(a){{var b={v:Howler.volume()};new TWEEN.Tween(b).to({v:1},1e3).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){Howler.volume(this.v)}).onComplete(function(){a&&a()}).start()}},b.prototype.fadeOutLoops=function(a){{var b=this.sounds,c={v:b[0].volume()};new TWEEN.Tween(c).to({v:0},1e3).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){for(var a=0;a<b.length;a++)b[a].loop()&&b[a].volume(this.v)}).onComplete(function(){a&&a()}).start()}},b.prototype.fadeInLoops=function(a){{var b=this.sounds,c={v:b[0].volume()};new TWEEN.Tween(c).to({v:1},1e3).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){for(var a=0;a<b.length;a++)b[a].loop()&&b[a].volume(this.v)}).onComplete(function(){a&&a()}).start()}},b.prototype.fadeInSound=function(a,b,c,d){{var e={v:a.volume()};new TWEEN.Tween(e).to({v:b},c).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){a.volume(this.v)}).onComplete(function(){d&&d()}).start()}},b.prototype.fadeOutSound=function(a,b,c){{var d={v:a.volume()};new TWEEN.Tween(d).to({v:0},b).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){a.volume(this.v)}).onComplete(function(){c&&c()}).start()}},b.prototype.muteAll=function(a){a?Howler.mute():this.fadeOutAll(function(){Howler.mute()})},b.prototype.unmuteAll=function(a){a?Howler.unmute():this.fadeInAll(function(){Howler.unmute()})},b.prototype.pauseAll=function(){var a=this;this.fadeOutAll(function(){for(var b=0;b<a.sounds.length;b++){var c=a.sounds[b];c.loop&&c.pause()}})},b.prototype.playAll=function(){for(var a=0;a<this.sounds.length;a++){var b=this.sounds[a];b.loop&&b.play()}this.audioOn&&this.fadeInAll()},a.AudioController=b}(window),function(a){function b(a){this.data=a.data,this.world=a.world,this.nav=a.nav,isMobile?this.initMobile():this.init()}b.prototype.init=function(){this.currentContent=null,this.currentSectionName="",this.currentHash=location.hash.substr(1).toLowerCase(),this.contentOpen=!1,this.canResize=!1,this.registrants=[],this.messenger=new Messenger({element:$(".msg"),typeDelay:20,untypeDelay:20,followMouse:!0,typerSoundUrls:this.data.common.sounds.typer}),this.currentContentSize=0,this.expanded=!1,this.mouseoverSound=audioController.createSound(this.data.world.module.sounds.mouseover,!1,!1,1),this.transInSound=audioController.createSound(this.data.common.sounds.transIn,!1,!1,1),this.transOutSound=audioController.createSound(this.data.common.sounds.transOut,!1,!1,1),this.transitioning=!1,b.SECTION_LOADED="onSectionLoaded",this.sectionLoadedEvent=new CustomEvent(b.SECTION_LOADED,{detail:null,bubbles:!0,cancelable:!0});{var a=this,c=$(".open > .over"),d=$(".open > .over > .bg"),e=$(".close > .over"),f=$(".close > .over > .bg"),g=$(".back > .over"),h=$(".back > .over > .bg"),i=$(".next > .over"),j=$(".next > .over > .bg"),k=$(".prev > .over"),l=$(".prev > .over > .bg");$("#logo > .title")}$("body").css("position","relative"),$(".open").mouseover(function(b){b.preventDefault();var e=new THREE.Color(a.world.getColorForSection(a.currentSectionName));d.css("backgroundColor","#"+e.getHexString()),c.css("top","0px"),audioController.audioOn&&a.mouseoverSound.play()}).mouseout(function(a){a.preventDefault(),c.css("top","-50px")}).click(function(b){b.preventDefault(),a.revealContent()}),$(".close").mouseover(function(b){b.preventDefault();var c=new THREE.Color(a.world.getColorForSection(a.currentSectionName));f.css("backgroundColor","#"+c.getHexString()),e.css("top","0px"),audioController.audioOn&&a.mouseoverSound.play()}).mouseout(function(a){a.preventDefault(),e.css("top","-50px")}).click(function(b){b.preventDefault(),a.closeSection(!1)}),$(".next").mouseover(function(b){b.preventDefault();var c=new THREE.Color(a.world.getColorForSection(a.currentSectionName));j.css("backgroundColor","#"+c.getHexString()),i.css("top","0px"),a.messenger.setMessage(a.currentContent.getNextItemName(),a.mouseoverSound,"right",{x:0,y:30}),audioController.audioOn&&a.mouseoverSound.play()}).mouseout(function(b){b.preventDefault(),i.css("top","-50px"),a.messenger.removeMessage(!0)}).click(function(b){b.preventDefault(),a.nextItem(),a.messenger.removeMessage(!0)}),$(".prev").mouseover(function(b){b.preventDefault();var c=new THREE.Color(a.world.getColorForSection(a.currentSectionName));l.css("backgroundColor","#"+c.getHexString()),k.css("top","0px"),a.messenger.setMessage(a.currentContent.getPrevItemName(),a.mouseoverSound,"right",{x:0,y:30}),audioController.audioOn&&a.mouseoverSound.play()}).mouseout(function(b){b.preventDefault(),k.css("top","-50px"),a.messenger.removeMessage(!0)}).click(function(b){b.preventDefault(),a.prevItem(),a.messenger.removeMessage(!0)}),$(".back").mouseover(function(b){b.preventDefault();var c=new THREE.Color(a.world.getColorForSection(a.currentSectionName));h.css("backgroundColor","#"+c.getHexString()),g.css("top","0px"),a.messenger.setMessage("Back",a.mouseoverSound,"right",{x:0,y:30}),audioController.audioOn&&a.mouseoverSound.play()}).mouseout(function(b){b.preventDefault(),g.css("top","-50px"),a.messenger.removeMessage(!0)}).click(function(b){b.preventDefault(),a.collapse()}),$("#logo > .title").addClass("animate-015");var m=$(".copyright")[0];m.innerHTML=m.innerHTML.replace("Copyright","Copyright "+(new Date).getFullYear()),inputController.register(this),this.resize()},b.prototype.initMobile=function(){this.currentContent=null,this.currentSectionName="",this.currentHash=location.hash.substr(1).toLowerCase(),this.registrants=[],$(".open").css("display","none"),$(".close").css("display","none"),$(".back").css("display","none"),$(".prev").css("display","none"),$(".next").css("display","none"),$(".copyright").css("display","none"),$("body").css("overflowY","scroll"),$("html").css("overflowY","scroll"),$(".nav-item").css("display","block"),$(".nav").css({top:"0"}),$("#content").css({width:"100%",height:"auto",top:$("#canvas").height()+"px"})},b.prototype.openSection=function(b,c){if(0==b.indexOf("/")&&(b=b.substr(1)),this.currentSectionName!=b||!this.contentOpen){if(this.currentSectionName==b&&!this.contentOpen&&null!=this.currentContent)return this.revealContent(),void(this.contentOpen=!0);var d=this;if(this.contentOpen)return void this.closeSection(!0,function(){d.openSection(b,c)});this.currentContent&&!this.contentOpen&&this.unloadContent(),this.contentOpen=!0,this.currentSectionName=b,this.clearTypers(),isFull?(this.transitioning=!0,this.world.goto(b,function(){d.hideOpenButton(),d.setContent(d.data[b],function(){d.transitioning=!1,a.dispatchEvent(d.sectionLoadedEvent),c&&c()})})):isStatic?(this.hideOpenButton(),this.transitioning=!0,this.world.goto(b),this.setContent(this.data[b],function(){d.transitioning=!1,a.dispatchEvent(d.sectionLoadedEvent),c&&c()})):(this.world.goto(b),this.setContent(this.data[b],function(){d.transitioning=!1,c&&c()}))}},b.prototype.closeSection=function(b,c){function d(){e.expanded&&($("#content > .content-container").css("top","0px"),$("#content > .full-item-container").css("top",-a.innerHeight+"px"),e.clearFullGallery(),e.expanded=!1,audioController.audioOn&&audioController.fadeInLoops()),e.enableAll(),b?e.unloadContent():(e.showOpenButton(),e.currentContent&&e.currentContent.thumbGallery&&(e.currentContent.thumbGallery.clearAllThumbMouseovers(),e.currentContent.thumbGallery.enable())),c&&c()}if(this.contentOpen){this.hideGalleryButtons(),b&&this.clearTypers(),this.clearPreloaders(),this.contentOpen=!1,this.currentSize=0;{var e=this,f=a.innerHeight;$("#content"),$("#canvas")}if(this.disableAll(),isMobile)d();else{var g="0.5s";move("#content").ease("ease-in-out-quint").set("top",f+"px").duration(g).end(),move("#canvas").ease("ease-in-out-quint").set("top","0px").duration(g).end(d),audioController.audioOn&&e.transOutSound.play()}}},b.prototype.setContent=function(b,c){var d=($("#content > .content-container"),$("#content > .content-container > .stuff > #title")),e=$("#content > .content-container > .stuff > #copy"),f=30,g=250,h=a.innerHeight-150;switch(this.sectionData=b,d.html(""),e.html(""),this.hideGalleryButtons(),isMobile&&0==$(".mobile-content").length&&$("#content").append('<div class="mobile-content"></div>'),b.id){case"work":case"play":this.currentContent=new WorkPlayContent({data:b,bottomPadding:f,minContentHeight:g,maxContentHeight:h,callback:function(){c&&c()}});break;case"info":this.currentContent=new InfoContent({data:b,bottomPadding:f,minContentHeight:g,maxContentHeight:h,callback:function(){c&&c()}});break;case"connect":this.currentContent=new ConnectContent({data:b,bottomPadding:f,minContentHeight:g,maxContentHeight:h,callback:function(){c&&c()}})}isMobile&&nav.refreshButtonStates()},b.prototype.unloadContent=function(){this.currentContent&&(this.currentContent.cleanUp(),this.currentContent=null),isMobile?$("#content").html(""):($("#content > .content-container > .container").html(""),$("#content > .content-container > .stuff > #title").html(""),$("#content > .content-container > .stuff > #copy").html("")),this.hideOpenButton()},b.prototype.revealContent=function(){!this.contentOpen&&this.currentContent&&(this.hideOpenButton(),this.setContentSize(this.currentContentSize,!0),this.contentOpen=!0)},b.prototype.showOpenButton=function(){$(".open").css("bottom","0px"),$(".copyright").css("right","110px")},b.prototype.hideOpenButton=function(){$(".open").css("bottom","-50px"),$(".copyright").css("right","30px")},b.prototype.initLinkSounds=function(){var a=this;$("a").off("mouseover"),$("a").mouseover(function(){audioController.audioOn&&a.mouseoverSound.play()})},b.prototype.setTitle=function(a){var b=$("#content > .content-container > .stuff > #title")[0];b.innerHTML=a},b.prototype.typeTitle=function(a,b){var c=this,d=$("#content > .content-container > .stuff > #title")[0],e=this.data.common.sounds.typer;this.titleTyper=new Typer({element:d,delay:20,soundUrls:e}),this.titleTyper.type(a,function(){c.titleTyper=null,b&&b()})},b.prototype.typeCopy=function(a,b,c){var d=this,e=$("#content > .content-container > .stuff > #copy")[0],f=this.data.common.sounds.typer,g=a.length>1e3?2:1;this.copyTyper=new Typer({element:e,delay:5,increment:g,soundUrls:f,randomize:b}),this.copyTyper.type(a,function(){d.copyTyper=null,c&&c()})},b.prototype.typeCopyGlitch=function(a,b,c){var d=this,e=$("#content > .content-container > .stuff > #copy")[0],f=this.data.common.sounds.typer,g=a.length>1e3?2:1;this.copyTyper=new Typer({element:e,delay:5,increment:g,soundUrls:f,randomize:b}),this.copyTyper.typeGlitch(a,10,20,function(){d.copyTyper=null,c&&c()})},b.prototype.typeThumbMessage=function(a,b,c){var d=this.data.common.sounds.typer,e=new Typer({element:a.find(".load-msg")[0],delay:20,soundUrls:d});e.type(b,c)},b.prototype.clearThumbLoadingMessage=function(a){a.find(".load-msg")[0].innerHTML="",this.currentContent.thumbGallery.clearThumbMouseover(a)},b.prototype.untypeTitle=function(a){var b=this,c=$("#content > .content-container > .stuff > #title")[0];this.titleTyper=new Typer({element:c,delay:20}),this.titleTyper.untype(function(){b.titleTyper=null,a&&a()})},b.prototype.untypeCopy=function(a){var b=this,c=$("#content > .content-container > .stuff > #copy")[0];this.copyTyper=new Typer({element:c,delay:5}),this.copyTyper.type(function(){b.copyTyper=null,a&&a()})},b.prototype.disableMouseEvents=function(){$("body").removeClass(),$("body").addClass("disable")},b.prototype.enableMouseEvents=function(){$("body").removeClass()},b.prototype.disableWorld=function(){this.world.enabled=!1},b.prototype.enableWorld=function(){this.world.enabled=!0},b.prototype.disableAll=function(){this.disableMouseEvents(),this.disableWorld()},b.prototype.enableAll=function(){this.enableMouseEvents(),this.enableWorld()},b.prototype.hideCloseButton=function(){var a=$(".close");a.css("top",-a.height()+"px")},b.prototype.showCloseButton=function(){var a=$(".close");a.css("top","0px")},b.prototype.hideGalleryButtons=function(){var a=$(".next");a.css("top",-a.height()+"px");var b=$(".prev");b.css("top",-b.height()+"px");var c=$(".back");c.css("top",-c.height()+"px")},b.prototype.showGalleryButtons=function(){var a=$(".next");a.css("top","0px");var b=$(".prev");b.css("top","0px");var c=$(".back");c.css("top","0px")},b.prototype.updateThumbColors=function(){},b.prototype.expand=function(b,c){for(var d=this,e=$("#content > .full-item-container > .container"),f=$("#content > .full-item-container > .stuff"),g=b.photos,h=g.length,i=[],j=this.sectionData.baseUrl,k=0;h>k;k++)i.push(j+g[k]);this.currentContent.thumbGallery.disable(),this.typeThumbMessage(this.currentContent.thumbGallery.currentThumb,"Loading..."),this.preloader=new Preloader({files:i,parent:document.body,topOffset:-this.currentContentSize,barColor:"#0c0c0c",message:getLoadingMessage(b.shortTitle?b.shortTitle:b.title)}),this.preloader.load(function(g){d.clearPreloaders(),d.fullGallery=new FullGallery({data:b,baseUrl:d.sectionData.baseUrl,container:e,copyContainer:f,sectionId:d.sectionData.id,easing:.2,loadStore:g}),d.fullGallery.enabled=!1,d.typeThumbMessage(d.currentContent.thumbGallery.currentThumb,"Loaded",function(){d.expanded=!0;var b="0.5s";move("#content .content-container").ease("ease-in-out-quint").set("top",a.innerHeight+"px").duration(b).end(),move("#content .full-item-container").ease("ease-in-out-quint").set("top","0px").duration(b).end(),d.showGalleryButtons(),d.setContentSize(a.innerHeight,!0,function(){d.register(d.fullGallery),d.disableWorld(),d.fullGallery.enabled=!0,d.clearThumbLoadingMessage(d.currentContent.thumbGallery.currentThumb),d.initLinkSounds(),d.world.module&&d.world.module.resetMouse(),c&&c()})})})},b.prototype.collapse=function(b){var c=this;this.fullGallery.enabled=!1,this.expanded=!1;var d="0.5s";move("#content .content-container").ease("ease-in-out-quint").set("top","0px").duration(d).end();var e=-a.innerHeight;move("#content .full-item-container").ease("ease-in-out-quint").set("top",e+"px").duration(d).end(),this.hideGalleryButtons(),this.setContentSize(this.currentContentSize,!0,function(){c.clearFullGallery(),c.currentContent.thumbGallery.enable(),b&&b()})},b.prototype.expandForMobile=function(b,c){document.ontouchmove=function(a){a.preventDefault()};for(var d=this,e=void 0!=b.mobile?b.mobile:b.photos,f=e.length,g=[],h=this.sectionData.baseUrl,i=0;f>i;i++)g.push(h+e[i]);var j=new THREE.Color(world.getColorForSection(this.currentSectionName)).getHexString();this.preloader=new Preloader({files:g,parent:document.body,topOffset:a.scrollY,barColor:"#"+j,bgColor:"#0c0c0c",message:"Loading "+(b.shortTitle?b.shortTitle:b.title)+" Stuff"}),this.preloader.load(function(a){d.preloader.cleanUp(),d.fullGallery=new FullGallery({data:b,baseUrl:d.sectionData.baseUrl,container:$("body"),sectionId:d.sectionData.id,loadStore:a,loadCallback:function(){document.ontouchmove=null,c&&c()}})})},b.prototype.collapseForMobile=function(){this.fullGallery.closeMobile(),this.fullGallery=null},b.prototype.setContentSize=function(b,c,d){if(!isMobile){var e=a.innerHeight;if(c){var f=this;this.disableAll();var g=function(){removeTweenGarbage($("#canvas")[0]),f.enableAll(),d&&d()},h="0.5s";move("#canvas").ease("ease-in-out-quint").set("top",-b/3+"px").duration(h).end(g),$("#canvas").position().top==-(b/3)&&setTimeout(g,825),move("#content").ease("ease-in-out-quint").set("top",e-b+"px").duration(h).end(),b>this.currentSize&&audioController.audioOn?this.transInSound.play():b<this.currentSize&&audioController.audioOn&&this.transOutSound.play()}else $("#content").css("top",e-b+"px"),$("#canvas").css("top",-b/3+"px");this.currentSize=b}},b.prototype.clearTypers=function(){this.titleTyper&&(this.titleTyper.clear(),this.titleTyper=null),this.copyTyper&&(this.copyTyper.clear(),this.copyTyper=null)},b.prototype.clearPreloaders=function(){this.preloader&&(this.preloader.clear(),this.preloader=null)},b.prototype.handleHashChange=function(a){var b=this;if(a=a||location.hash.substr(2).toLowerCase(),$("#content").css(""===a?{height:"auto",minHeight:"unset"}:{height:"100%",minHeight:"100%"}),this.transitioning=!0,!router.routeIsValid()&&!router.routeIsCommand()||""==a)this.contentOpen?this.closeSection(!0,function(){b.world.goto("home",function(){b.transitioning=!1}),b.currentSectionName=""}):(this.currentContent&&this.unloadContent(),this.world.goto("home",function(){b.transitioning=!1}),this.currentSectionName=""),isMobile&&$("#content").css({height:"auto"});else if(router.routeIsCommand()){var c=a.substr(4);"shutdown"==c&&world.module.on?world.module.turnOff():"startup"!=c||world.module.on||world.module.turnOn(),location.hash=this.currentHash}else this.openSection(a,function(){b.transitioning=!1})},b.prototype.handleKeyUp=function(a){switch(a.keyCode){case 27:this.closeSection(!1);break;case 39:this.expanded&&this.nextItem();break;case 37:this.expanded&&this.prevItem();break;case 40:this.expanded?this.collapse():!this.expanded&&this.currentContent&&this.contentOpen&&this.closeSection(!1);break;case 38:case 13:!this.expanded&&this.currentContent&&this.currentContent.thumbGallery&&this.contentOpen?this.currentContent.expandClosest():this.currentContent&&!this.contentOpen&&this.revealContent()}},b.prototype.handleKeyDown=function(a){switch(a.keyCode){case 39:this.expanded||this.scrollRight();break;case 37:this.expanded||this.scrollLeft()}},b.prototype.nextItem=function(){if(this.currentContent){var a=this;this.collapse(function(){a.currentContent.nextItem()})}},b.prototype.prevItem=function(){if(this.currentContent){var a=this;this.collapse(function(){a.currentContent.prevItem()})}},b.prototype.isDraggingGallery=function(){var a=!1;return this.currentContent&&this.currentContent.thumbGallery&&(a=this.currentContent.thumbGallery.dragging),a},b.prototype.scrollToNextItem=function(){this.currentContent&&this.currentContent.scrollToNextItem()},b.prototype.scrollToPrevItem=function(){this.currentContent&&this.currentContent.scrollToPrevItem()},b.prototype.scrollLeft=function(){var a=100;this.currentContent&&this.currentContent.thumbGallery&&this.contentOpen&&!this.expanded&&this.currentContent.thumbGallery.scrollLeft(a)},b.prototype.scrollRight=function(){var a=100;this.currentContent&&this.currentContent.thumbGallery&&this.contentOpen&&!this.expanded&&this.currentContent.thumbGallery.scrollRight(a)},b.prototype.update=function(){for(var a=0;a<this.registrants.length;a++)this.registrants[a].render&&this.registrants[a].render()},b.prototype.resize=function(){for(var b=0;b<this.registrants.length;b++)this.registrants[b].resize&&this.registrants[b].resize();this.currentContent?isMobile?$("#content").css({top:$("#canvas").height()+"px"}):(this.currentContent.maxContentHeight=a.innerHeight-150,this.currentContent.resize(),this.preloader&&this.preloader.resize(-this.currentContentSize),this.contentOpen||$("#content").css({top:$("#canvas").height()+"px"})):this.canResize&&$("#content").css(isMobile?{top:$("#canvas").height()+"px"}:{top:a.innerHeight+"px"}),isMobile||($("#content #title").css("maxWidth",a.innerWidth-60+"px"),$("#content #copy").css("maxWidth",a.innerWidth-60+"px"),$("#content #full-title").css("maxWidth",a.innerWidth-60+"px"),$("#content #full-copy").css("maxWidth",a.innerWidth-60+"px"))
},b.prototype.scrollTo=function(b,c){{var d=(document.body,{scroll:a.scrollY});new TWEEN.Tween(d).to({scroll:b.offset().top},1e3).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){a.scrollTo(0,this.scroll)}).onComplete(function(){c&&c()}).start()}},b.prototype.scrollToContent=function(b){{var c=(document.body,{scroll:a.scrollY});new TWEEN.Tween(c).to({scroll:a.innerHeight},1e3).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){a.scrollTo(0,this.scroll)}).onComplete(function(){b&&b()}).start()}},b.prototype.scrollToTop=function(b){{var c=(document.body,{scroll:a.scrollY});new TWEEN.Tween(c).to({scroll:0},1e3).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){a.scrollTo(0,this.scroll)}).onComplete(function(){b&&b()}).start()}},b.prototype.register=function(a){this.registrants.contains(a)||this.registrants.push(a)},b.prototype.unregister=function(a){var b=this.registrants.indexOf(a);-1!=b&&this.registrants.splice(b,1)},b.prototype.clearFullGallery=function(){this.fullGallery&&(this.unregister(this.fullGallery),this.fullGallery.cleanUp(),this.fullGallery=null)},b.prototype.pauseSite=function(){this.fullGallery.enabled=!1;var a=this,b=document.createElement("div");document.body.appendChild(b),$(b).html("<div>MY/STATIC/SELF<br/><br/>Resume</div>"),$(b).addClass("site-overlay"),$(b).click(function(){a.resumeSite($(this)[0])}),audioController.audioOn&&audioController.muteAll(!0)},b.prototype.resumeSite=function(a){document.body.removeChild(a),this.fullGallery.enabled=!0,audioController.audioOn&&audioController.unmuteAll(!0)},a.ContentController=b}(window),function(a){function b(a){this.composer=a.composer,this.module=a.module,this.camera=a.camera,this.cameraShake=a.cameraShake,this.flash=a.flash,this.antialias=a.antialias,this.init()}b.prototype.init=function(){if(this.cameraPos=this.camera.position.clone(),this.glitching=!1,this.flash){var b=25,c=4;this.bloomEffect=new THREE.BloomPass(c,b,b,512),this.composer.addPass(this.bloomEffect)}this.rgbShiftEffect=new THREE.ShaderPass(THREE.RGBShiftShader),this.rgbShiftEffect.uniforms.amount.value=0,this.composer.addPass(this.rgbShiftEffect),this.hBlurEffect=new THREE.ShaderPass(THREE.HorizontalBlurShader),this.hBlurEffect.uniforms.h.value=0,this.composer.addPass(this.hBlurEffect),this.vBlurEffect=new THREE.ShaderPass(THREE.VerticalBlurShader),this.vBlurEffect.uniforms.v.value=0,this.composer.addPass(this.vBlurEffect),this.antialias&&(this.fxaa=new THREE.ShaderPass(THREE.FXAAShader),this.fxaa.uniforms.resolution.value=new THREE.Vector2(1/a.innerWidth,1/a.innerHeight),this.composer.addPass(this.fxaa)),this.vignetteEffect=new THREE.ShaderPass(THREE.VignetteShader),this.vignetteEffect.uniforms.offset.value=0,this.vignetteEffect.uniforms.darkness.value=.9,this.composer.addPass(this.vignetteEffect),this.grain=new THREE.ShaderPass(THREE.GrainShader),this.grain.uniforms.intensity.value=.025,this.grain.renderToScreen=!0,this.composer.addPass(this.grain)},b.prototype.disableVignette=function(){{var a=this;new TWEEN.Tween({val:this.vignetteEffect.uniforms.offset.value,val2:this.grain.uniforms.intensity.value}).to({val:0,val2:.025},1e3).easing(TWEEN.Easing.Linear.None).delay(0).onUpdate(function(){a.vignetteEffect.uniforms.offset.value=this.val,a.grain.uniforms.intensity.value=this.val2}).start()}},b.prototype.enableVignette=function(){{var a=this;new TWEEN.Tween({val:this.vignetteEffect.uniforms.offset.value,val2:this.grain.uniforms.intensity.value}).to({val:.95,val2:.04},1e3).easing(TWEEN.Easing.Linear.None).delay(0).onUpdate(function(){a.vignetteEffect.uniforms.offset.value=this.val,a.grain.uniforms.intensity.value=this.val2}).start()}},b.prototype.update=function(){if(this.glitching)this.bloomEffect.copyUniforms.opacity.value=.5*Math.random(),this.rgbShiftEffect.uniforms.amount.value=.005+.01*Math.random(),this.hBlurEffect.uniforms.h.value=.002*Math.random(),this.vBlurEffect.uniforms.v.value=.002*Math.random(),this.cameraShake&&(this.camera.position.z=this.cameraPos.z+Math.random());else if(this.rgbShiftEffect.uniforms.amount.value=this.module.totalEffectAmount/fpsScalar,this.hBlurEffect.uniforms.h.value=.1*this.module.horizontalEffectAmount,this.vBlurEffect.uniforms.v.value=.1*this.module.verticalEffectAmount,this.bloomEffect.copyUniforms.opacity.value=this.flash&&this.module.targRGBEffectAmount>20?.025*this.module.targRGBEffectAmount:this.module.dragging?25*this.module.totalEffectAmount:0,this.cameraShake){var a=.25*this.module.targRGBEffectAmount,b=Math.random()*a-Math.random()*a;this.camera.position.z=this.cameraPos.z+b}this.grain&&(this.grain.uniforms.time.value+=.001)},b.prototype.glitch=function(){this.glitching=!0},b.prototype.reset=function(){this.glitching=!1,this.bloomEffect.copyUniforms.opacity.value=0,this.rgbShiftEffect.uniforms.amount.value=0,this.hBlurEffect.uniforms.h.value=0,this.vBlurEffect.uniforms.v.value=0,this.camera.position.z=this.cameraPos.z},b.prototype.resize=function(){this.antialias&&(this.fxaa.uniforms.resolution.value=new THREE.Vector2(1/a.innerWidth,1/a.innerHeight)),this.update()},a.EffectsController=b}(window),function(a){function b(){this.init()}b.prototype.init=function(){function b(a){a.preventDefault();for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleMouseMove&&h.registrants[b].handleMouseMove(a)}function c(a){a.preventDefault();for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleMouseDown&&h.registrants[b].handleMouseDown(a)}function d(a){a.preventDefault();for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleMouseUp&&h.registrants[b].handleMouseUp(a)}function e(a){for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleClick&&h.registrants[b].handleClick(a)}function f(a){a.preventDefault();for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleKeyUp&&h.registrants[b].handleKeyUp(a)}function g(a){for(var b=0;b<h.registrants.length;b++)h.registrants[b].handleKeyDown&&h.registrants[b].handleKeyDown(a)}var h=this;this.registrants=[],a.onmousemove=b,a.onmousedown=c,a.onmouseup=d,a.onclick=e,a.onkeyup=f,a.onkeydown=g},b.prototype.register=function(a){this.registrants.contains(a)||this.registrants.push(a)},b.prototype.unregister=function(a){var b=this.registrants.indexOf(a);-1!=b&&this.registrants.splice(b,1)},a.InputController=b}(window),function(a){function b(){this.init()}b.prototype.init=function(){this.currentRoute="",this.queue=null},b.prototype.initCurrentRoute=function(){this.currentRoute=location.hash.substr(2).toLowerCase()},b.prototype.setRoute=function(a){contentController.transitioning||(a=a.toLowerCase(),this.currentRoute!=a?(this.currentRoute=a,location.hash="/"+a):""!=a&&contentController.openSection(a))},b.prototype.removeSectionLoadedListener=function(){try{a.removeEventListener(ContentController.SECTION_LOADED)}catch(b){}},b.prototype.handleHashChange=function(){if(contentController.transitioning){var b=this;this.queue=location.hash.substr(2).toLowerCase(),this.removeSectionLoadedListener(),a.addEventListener(ContentController.SECTION_LOADED,function(){contentController.handleHashChange(b.queue),b.queue=null,b.removeSectionLoadedListener()})}else contentController.handleHashChange()},b.prototype.routeIsValid=function(a){var b=!1;return a=a||location.hash.substr(2).toLowerCase(),"common"==a||"world"==a?b=!1:(void 0!=appData[a]||""==a)&&(b=!0),b},b.prototype.routeIsCommand=function(a){var b=!1,a=location.hash.toLowerCase();return-1!=a.indexOf("cmd:")&&(b=!0),b},a.Router=b}(window),function(a){function b(a){this.scrollElement=a.scrollElement,this.scrollHeight=a.scrollHeight,this.easing=a.easing||.3,this.init()}b.prototype.init=function(){this.targY=0,this.currentY=0,this.enabled=!0;var a=this;this.scrollElement.mousewheel(function(b){a.handleMouseWheel(b)})},b.prototype.handleMouseWheel=function(a){this.enabled&&(this.elementHeight=this.scrollElement.height(),a.clientY>=this.scrollElement.offset().top&&this.elementHeight>this.scrollHeight?(this.targY+=a.deltaY*a.deltaFactor,this.targY=clamp(this.targY,-(this.elementHeight-this.scrollHeight+30),0)):this.elementHeight<this.scrollHeight&&(this.targY=0))},b.prototype.render=function(){this.enabled&&(this.currentY+=(this.targY-this.currentY)*this.easing*fpsScalar,this.scrollElement.css("top",this.currentY+"px"))},b.prototype.cleanUp=function(){this.scrollElement.unmousewheel(),this.scrollElement.css("top","0px"),this.scrollElement=null,this.scrollHeight=null,this.easing=null,this.targY=null,this.currentY=null,this.enabled=null},a.ScrollableContent=b}(window),$(function(){function a(){var a="assets/json/data.min.json",e="assets/js/vendor.min.js",f="assets/json/status.json",g=u?[a,f]:[a,e,f],h=16777215;t=new Preloader({files:g,parent:document.body,topOffset:0,barColor:h,textColor:"#111",message:"Loading Stuff"}),t.load(function(e){window.appData=e[a],window.appData.available=e[f].available,t.cleanUp(),t=null,d(),isFull?b():c()})}function b(){var a=16777215;t=new Preloader({files:[{url:"assets/json/module_1.json",geometry:!0},{url:"assets/json/module_2.json",geometry:!0},{url:"assets/json/module_3.json",geometry:!0},{url:"assets/json/module_4.json",geometry:!0},"assets/img/textures/module_1.jpg","assets/img/textures/module_2.jpg","assets/img/textures/module_3.jpg","assets/img/textures/module_4.jpg"],parent:document.body,topOffset:0,barColor:a,textColor:"#111",message:"Loading Some Other Stuff"}),t.load(function(a){t.cleanUp(),t=null,c({module1:a["assets/json/module_1.json"],module2:a["assets/json/module_2.json"],module3:a["assets/json/module_3.json"],module4:a["assets/json/module_4.json"]})})}function c(a){s=new Nav,window.nav=s,r=new AudioController,window.audioController=r,q=new InputController,window.inputController=q,n=new World({data:window.appData.world,colors:I,loadCallback:e,moduleGeometries:a}),window.world=n,p=new ContentController({data:window.appData,world:n,nav:s}),p.disableMouseEvents(),window.contentController=p,o=new Router,window.router=o,i(),f()}function d(a){window.STATE_FULL="state_full",window.STATE_STATIC="state_static",window.STATE_MOBILE="state_mobile",w.sid&&w.sid.length>1&&(w.sid=w.sid.substr(0,1));var b=a||w.sid||null;if(b)1==b?window.state=STATE_FULL:2==b?window.state=STATE_STATIC:3==b&&(window.state=STATE_MOBILE);else{var c=$.browser.mobile,d=Detector.webgl,e=$.browser.msie;window.state=c?STATE_MOBILE:!c&&!d||e?STATE_STATIC:STATE_FULL}window.isMobile=window.state===STATE_MOBILE,window.isStatic=window.state===STATE_STATIC,window.isFull=window.state===STATE_FULL,x=window.isFull?!0:!1}function e(){isFull?p.setContentSize(0,!0,function(){p.enableAll(),p.showCloseButton(),p.canResize=!0,s.transitionIn(),n.module.transitionIn(function(){o.routeIsValid()&&(o.initCurrentRoute(),o.handleHashChange())})}):isStatic?p.setContentSize(0,!0,function(){p.enableAll(),p.showCloseButton(),p.canResize=!0,s.transitionIn(),o.routeIsValid()&&(o.initCurrentRoute(),o.handleHashChange())}):(p.enableAll(),p.canResize=!0,o.routeIsValid()&&(o.initCurrentRoute(),o.handleHashChange()))}function f(){requestAnimationFrame(f),TWEEN.update(),p.update(),n.enabled&&n.render();var a=new Date,b=1e3/(a-B);B=a,y+=b,A++,z=Math.round(y/A),A>60&&(A=0,y=0,n.resolution!=fpsScalar&&(void 0===window.devicePixelRatio||1===window.devicePixelRatio)&&n.setResolution(fpsScalar)),fpsScalar=20>z?2.5:30>z?2:40>z?1.5:1,v&&(m.innerHTML=Math.round(z)),x&&(6>b?C++:18>b?D++:b>45&&E++,D>=G||C>=H?(x=!1,g()):E>=F&&(x=!1))}function g(){n.enabled=!1;var a=document.createElement("div");document.body.appendChild(a),$(a).html("<div><p>MY/STATIC/SELF</p><p class='padded'>My maker wanted me to check how I'm performing periodically and it seems I'm running a bit on the slow side. Would you like to switch over to a simpler version which should run a tad faster?</p><p><div class='yes'><a href='#'>Sure</a></div> / <div class='no'><a href='#'>Nope</a></div></p></div>"),$(a).addClass("site-overlay"),$(a).css("cursor","auto"),$(".site-overlay div").css("pointerEvents","auto"),$(".yes").click(function(b){b.preventDefault(),b.stopPropagation(),location.href=""!=o.currentRoute?"/?sid=2/#/"+o.currentRoute:"/?sid=2/",$(a).remove()}),$(".no").click(function(b){b.preventDefault(),b.stopPropagation(),$(a).remove(),n.enabled=!0})}function h(){var a=document.createElement("div");document.body.appendChild(a),$(a).html("<div><p>MY/STATIC/SELF</p><p class='padded'>It looks like your browser supports WebGL but it's disabled. You can enable it by following these steps.</p><p class='padded'>Open the Safari menu and select Preferences. Then, click the Advanced tab in the Preferences window. Then, at the bottom of the window, check the Show Develop menu in menu bar checkbox. Then, open the Develop menu in the menu bar and select Enable WebGL.</p><p><div class='ok'><a href='#'>Ok</a></div></p></div>"),$(a).addClass("site-overlay"),$(a).css("cursor","auto"),$(".site-overlay div").css("pointerEvents","auto"),$(".ok").click(function(b){b.preventDefault(),b.stopPropagation(),$(a).remove()})}function i(){var a=!!Detector.webgl,b=!!window.WebGLRenderingContext;!a&&b&&$.browser.webkit&&!isMobile&&h()}function j(){t&&t.resize(0),s&&s.resize(),p&&p.resize(),n&&n.resize()}function k(a){a.preventDefault(),o.handleHashChange()}function l(){for(var a,b=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<c.length;d++)a=c[d].split("="),b.push(a[0]),b[a[0]]=a[1];return b}{var m,n,o,p,q,r,s,t,u=!1,v=!1,w=l(),x=!0,y=0,z=0,A=0,B=new Date,C=0,D=0,E=0,F=300,G=120,H=60,I={fgColor:16777215,home:1579032,work:4575844,play:15753867,info:16744306,connect:1081087};$("body")}window.fpsScalar=1;var J=$.browser.mobile;J&&$(".open").css("display","none"),window.onresize=j,window.onhashchange=k,a(),v&&(m||(m=document.createElement("div"),m.style.zIndex=1e4,m.style.width="20px",m.style.backgroundColor="#111",m.style.padding="10px",m.style.textAlign="center",document.body.appendChild(m),$(m).addClass("halign")))});